<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>gulp | 个人博客</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="https://colastar.github.io/blogs/views/images/favicon.ico">
    <link rel="manifest" href="https://colastar.github.io/blogs/views/js/manifest.json">
    <link rel="apple-touch-icon" href="https://colastar.github.io/blogs/views/images/logo.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://colastar.github.io/blogs/views/js/tj.js"></script>
    <script src="https://colastar.github.io/blogs/views/js/code.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="人生代代无穷已，江月年年只相似。">
    
    <link rel="preload" href="/assets/css/0.styles.f700448a.css" as="style"><link rel="preload" href="/assets/js/app.a49ca15b.js" as="script"><link rel="preload" href="/assets/js/2.2b4afd4e.js" as="script"><link rel="preload" href="/assets/js/64.8f1bfde4.js" as="script"><link rel="prefetch" href="/assets/js/10.d59dfbc7.js"><link rel="prefetch" href="/assets/js/100.5d7aaa79.js"><link rel="prefetch" href="/assets/js/101.8707a73c.js"><link rel="prefetch" href="/assets/js/102.991a045c.js"><link rel="prefetch" href="/assets/js/103.279c263f.js"><link rel="prefetch" href="/assets/js/104.f95b6770.js"><link rel="prefetch" href="/assets/js/105.fa4003b7.js"><link rel="prefetch" href="/assets/js/106.c73d62fe.js"><link rel="prefetch" href="/assets/js/107.3f30ad29.js"><link rel="prefetch" href="/assets/js/108.0fac0f00.js"><link rel="prefetch" href="/assets/js/109.fa0f6153.js"><link rel="prefetch" href="/assets/js/11.71162af2.js"><link rel="prefetch" href="/assets/js/110.2234e90c.js"><link rel="prefetch" href="/assets/js/111.949f329e.js"><link rel="prefetch" href="/assets/js/112.fd2d7628.js"><link rel="prefetch" href="/assets/js/113.95e6e404.js"><link rel="prefetch" href="/assets/js/114.5c42cf0b.js"><link rel="prefetch" href="/assets/js/115.6e082b7a.js"><link rel="prefetch" href="/assets/js/116.4b5f6888.js"><link rel="prefetch" href="/assets/js/117.37336c48.js"><link rel="prefetch" href="/assets/js/118.3d147f5a.js"><link rel="prefetch" href="/assets/js/119.37f4600e.js"><link rel="prefetch" href="/assets/js/12.cd36b2df.js"><link rel="prefetch" href="/assets/js/120.0d031702.js"><link rel="prefetch" href="/assets/js/121.4f227a45.js"><link rel="prefetch" href="/assets/js/122.61ca8d6c.js"><link rel="prefetch" href="/assets/js/123.60415e5a.js"><link rel="prefetch" href="/assets/js/124.9558b4ad.js"><link rel="prefetch" href="/assets/js/125.aaba3c26.js"><link rel="prefetch" href="/assets/js/126.51713071.js"><link rel="prefetch" href="/assets/js/127.a7c42c0d.js"><link rel="prefetch" href="/assets/js/128.61fda753.js"><link rel="prefetch" href="/assets/js/129.6896a0e8.js"><link rel="prefetch" href="/assets/js/13.ca3fe43c.js"><link rel="prefetch" href="/assets/js/130.90c48393.js"><link rel="prefetch" href="/assets/js/131.4b07d37c.js"><link rel="prefetch" href="/assets/js/132.b904110e.js"><link rel="prefetch" href="/assets/js/133.23fd0ad3.js"><link rel="prefetch" href="/assets/js/134.7dccd575.js"><link rel="prefetch" href="/assets/js/135.95c92179.js"><link rel="prefetch" href="/assets/js/136.2d1dd7ce.js"><link rel="prefetch" href="/assets/js/137.11bd2504.js"><link rel="prefetch" href="/assets/js/138.737c3a11.js"><link rel="prefetch" href="/assets/js/139.6e2a9088.js"><link rel="prefetch" href="/assets/js/14.f23f22c3.js"><link rel="prefetch" href="/assets/js/140.0f019147.js"><link rel="prefetch" href="/assets/js/141.e2b720f6.js"><link rel="prefetch" href="/assets/js/142.83921c3a.js"><link rel="prefetch" href="/assets/js/143.5cdc78c9.js"><link rel="prefetch" href="/assets/js/144.f015aaf8.js"><link rel="prefetch" href="/assets/js/145.6cccc7c0.js"><link rel="prefetch" href="/assets/js/146.1c93c84f.js"><link rel="prefetch" href="/assets/js/147.fe503c78.js"><link rel="prefetch" href="/assets/js/148.2c448862.js"><link rel="prefetch" href="/assets/js/149.23090952.js"><link rel="prefetch" href="/assets/js/15.4ece5f9e.js"><link rel="prefetch" href="/assets/js/150.784e8a88.js"><link rel="prefetch" href="/assets/js/151.236f6101.js"><link rel="prefetch" href="/assets/js/152.7fbadfdb.js"><link rel="prefetch" href="/assets/js/153.4eaf284b.js"><link rel="prefetch" href="/assets/js/154.9068ebea.js"><link rel="prefetch" href="/assets/js/155.6fddb281.js"><link rel="prefetch" href="/assets/js/156.1aa56a14.js"><link rel="prefetch" href="/assets/js/157.b2c94e2d.js"><link rel="prefetch" href="/assets/js/158.fa7d72d3.js"><link rel="prefetch" href="/assets/js/159.7c4dfdf5.js"><link rel="prefetch" href="/assets/js/16.abfb89a1.js"><link rel="prefetch" href="/assets/js/160.14652c0c.js"><link rel="prefetch" href="/assets/js/161.b8d2a29a.js"><link rel="prefetch" href="/assets/js/162.4795430e.js"><link rel="prefetch" href="/assets/js/163.81832790.js"><link rel="prefetch" href="/assets/js/164.895910ca.js"><link rel="prefetch" href="/assets/js/165.45baa9b2.js"><link rel="prefetch" href="/assets/js/166.865b3d91.js"><link rel="prefetch" href="/assets/js/167.cf9e71c2.js"><link rel="prefetch" href="/assets/js/17.ade900bf.js"><link rel="prefetch" href="/assets/js/18.0df95d12.js"><link rel="prefetch" href="/assets/js/19.02b95d5a.js"><link rel="prefetch" href="/assets/js/20.bde80fdc.js"><link rel="prefetch" href="/assets/js/21.09fe235c.js"><link rel="prefetch" href="/assets/js/22.bb9675c2.js"><link rel="prefetch" href="/assets/js/23.d9c3d973.js"><link rel="prefetch" href="/assets/js/24.b1008ce9.js"><link rel="prefetch" href="/assets/js/25.4e84d8c4.js"><link rel="prefetch" href="/assets/js/26.cda9bf46.js"><link rel="prefetch" href="/assets/js/27.b9d6f40d.js"><link rel="prefetch" href="/assets/js/28.99647803.js"><link rel="prefetch" href="/assets/js/29.fda65399.js"><link rel="prefetch" href="/assets/js/3.4c3534bf.js"><link rel="prefetch" href="/assets/js/30.9db680a1.js"><link rel="prefetch" href="/assets/js/31.165acb82.js"><link rel="prefetch" href="/assets/js/32.10794818.js"><link rel="prefetch" href="/assets/js/33.c4280440.js"><link rel="prefetch" href="/assets/js/34.d4756c75.js"><link rel="prefetch" href="/assets/js/35.44973cf6.js"><link rel="prefetch" href="/assets/js/36.a2ac49e7.js"><link rel="prefetch" href="/assets/js/37.61680e06.js"><link rel="prefetch" href="/assets/js/38.67a90281.js"><link rel="prefetch" href="/assets/js/39.1f4246ca.js"><link rel="prefetch" href="/assets/js/4.cd3e2e4c.js"><link rel="prefetch" href="/assets/js/40.a3be074b.js"><link rel="prefetch" href="/assets/js/41.0ab22ad7.js"><link rel="prefetch" href="/assets/js/42.c4c76c62.js"><link rel="prefetch" href="/assets/js/43.31ad788a.js"><link rel="prefetch" href="/assets/js/44.48ea0520.js"><link rel="prefetch" href="/assets/js/45.7861a4f0.js"><link rel="prefetch" href="/assets/js/46.a3c15607.js"><link rel="prefetch" href="/assets/js/47.0d8bb16a.js"><link rel="prefetch" href="/assets/js/48.df900037.js"><link rel="prefetch" href="/assets/js/49.7bc3b92d.js"><link rel="prefetch" href="/assets/js/5.0d43fff3.js"><link rel="prefetch" href="/assets/js/50.4e284ccd.js"><link rel="prefetch" href="/assets/js/51.351514d8.js"><link rel="prefetch" href="/assets/js/52.b32fabc2.js"><link rel="prefetch" href="/assets/js/53.032e88b0.js"><link rel="prefetch" href="/assets/js/54.035e8a97.js"><link rel="prefetch" href="/assets/js/55.2d650fac.js"><link rel="prefetch" href="/assets/js/56.1869b640.js"><link rel="prefetch" href="/assets/js/57.5226805e.js"><link rel="prefetch" href="/assets/js/58.1041fa3e.js"><link rel="prefetch" href="/assets/js/59.a6f1cc35.js"><link rel="prefetch" href="/assets/js/6.f3d455ea.js"><link rel="prefetch" href="/assets/js/60.24ea1dc4.js"><link rel="prefetch" href="/assets/js/61.42a23f7e.js"><link rel="prefetch" href="/assets/js/62.829ac203.js"><link rel="prefetch" href="/assets/js/63.a1e8623f.js"><link rel="prefetch" href="/assets/js/65.52e67bda.js"><link rel="prefetch" href="/assets/js/66.072601f9.js"><link rel="prefetch" href="/assets/js/67.39a5e42c.js"><link rel="prefetch" href="/assets/js/68.052f39cf.js"><link rel="prefetch" href="/assets/js/69.4faaee3f.js"><link rel="prefetch" href="/assets/js/7.61ea5dc1.js"><link rel="prefetch" href="/assets/js/70.15edf2e5.js"><link rel="prefetch" href="/assets/js/71.bf0db890.js"><link rel="prefetch" href="/assets/js/72.4f95447f.js"><link rel="prefetch" href="/assets/js/73.42742ab1.js"><link rel="prefetch" href="/assets/js/74.91d1742f.js"><link rel="prefetch" href="/assets/js/75.53d7c547.js"><link rel="prefetch" href="/assets/js/76.c3b2f9ee.js"><link rel="prefetch" href="/assets/js/77.875814b3.js"><link rel="prefetch" href="/assets/js/78.2f28a62a.js"><link rel="prefetch" href="/assets/js/79.0142ceb4.js"><link rel="prefetch" href="/assets/js/8.3df27b51.js"><link rel="prefetch" href="/assets/js/80.b6a0c94c.js"><link rel="prefetch" href="/assets/js/81.3ab20d0d.js"><link rel="prefetch" href="/assets/js/82.462ccc3c.js"><link rel="prefetch" href="/assets/js/83.31d193c6.js"><link rel="prefetch" href="/assets/js/84.6eb6525a.js"><link rel="prefetch" href="/assets/js/85.f3a34abc.js"><link rel="prefetch" href="/assets/js/86.baea4826.js"><link rel="prefetch" href="/assets/js/87.d6d12c4e.js"><link rel="prefetch" href="/assets/js/88.1a56dc74.js"><link rel="prefetch" href="/assets/js/89.9e55bc7a.js"><link rel="prefetch" href="/assets/js/9.a1f681ef.js"><link rel="prefetch" href="/assets/js/90.69f24135.js"><link rel="prefetch" href="/assets/js/91.7332b328.js"><link rel="prefetch" href="/assets/js/92.e360a6dc.js"><link rel="prefetch" href="/assets/js/93.ac907abd.js"><link rel="prefetch" href="/assets/js/94.1d792af1.js"><link rel="prefetch" href="/assets/js/95.a3d4039c.js"><link rel="prefetch" href="/assets/js/96.f525d75d.js"><link rel="prefetch" href="/assets/js/97.bc1a53fa.js"><link rel="prefetch" href="/assets/js/98.f2809d38.js"><link rel="prefetch" href="/assets/js/99.34de5b73.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f700448a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/no.0/js/es6.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/javascript-QA/javascriptqa.html" class="nav-link">
  javaScript与测试工程师
</a></li><li class="dropdown-item"><!----> <a href="/no.1/函数式编程/函数式编程.html" class="nav-link">
  编程相关
</a></li><li class="dropdown-item"><!----> <a href="/no.2/http.html" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/no.3/webpack.html" class="nav-link">
  前端自动化
</a></li><li class="dropdown-item"><!----> <a href="/no.4/前端性能优化.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/no.5/css工作流.html" class="nav-link">
  css相关
</a></li><li class="dropdown-item"><!----> <a href="/no.6/react/react.html" class="nav-link">
  框架相关
</a></li><li class="dropdown-item"><!----> <a href="/no.7/计算机组成原理.html" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/no.8/数据结构与算法.html" class="nav-link">
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/node/node/node.html" class="nav-link">
  node相关
</a></li><li class="dropdown-item"><!----> <a href="/no.10/网络安全.html" class="nav-link">
  网络安全
</a></li><li class="dropdown-item"><!----> <a href="/other/git/git命令全集.html" class="nav-link">
  其他相关
</a></li></ul></div></div><div class="nav-item"><a href="/other/手写各种/手写代码实现.html" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="https://github.com/ColaStar/blogs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/no.0/js/es6.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/javascript-QA/javascriptqa.html" class="nav-link">
  javaScript与测试工程师
</a></li><li class="dropdown-item"><!----> <a href="/no.1/函数式编程/函数式编程.html" class="nav-link">
  编程相关
</a></li><li class="dropdown-item"><!----> <a href="/no.2/http.html" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/no.3/webpack.html" class="nav-link">
  前端自动化
</a></li><li class="dropdown-item"><!----> <a href="/no.4/前端性能优化.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/no.5/css工作流.html" class="nav-link">
  css相关
</a></li><li class="dropdown-item"><!----> <a href="/no.6/react/react.html" class="nav-link">
  框架相关
</a></li><li class="dropdown-item"><!----> <a href="/no.7/计算机组成原理.html" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/no.8/数据结构与算法.html" class="nav-link">
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/node/node/node.html" class="nav-link">
  node相关
</a></li><li class="dropdown-item"><!----> <a href="/no.10/网络安全.html" class="nav-link">
  网络安全
</a></li><li class="dropdown-item"><!----> <a href="/other/git/git命令全集.html" class="nav-link">
  其他相关
</a></li></ul></div></div><div class="nav-item"><a href="/other/手写各种/手写代码实现.html" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="https://github.com/ColaStar/blogs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/no.3/bower.html" class="sidebar-link">bower</a></li><li><a href="/no.3/browserify.html" class="sidebar-link">Browserify</a></li><li><a href="/no.3/commojs-vs-es6module.html" class="sidebar-link">模块规范对比</a></li><li><a href="/no.3/grunt.html" class="sidebar-link">grunt</a></li><li><a href="/no.3/gulp.html" aria-current="page" class="active sidebar-link">gulp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/no.3/gulp.html#gulp简介" class="sidebar-link">gulp简介</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#作用" class="sidebar-link">作用</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#应用" class="sidebar-link">应用</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#api" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/no.3/gulp.html#src" class="sidebar-link">src</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#dest" class="sidebar-link">dest</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#symlink" class="sidebar-link">symlink</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#lastrun" class="sidebar-link">lastRun</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#series" class="sidebar-link">series</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#parallel" class="sidebar-link">parallel</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#task" class="sidebar-link">task</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#registry" class="sidebar-link">registry</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#tree" class="sidebar-link">tree</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#vinyl" class="sidebar-link">Vinyl</a></li></ul></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#一些常用的插件" class="sidebar-link">一些常用的插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/no.3/gulp.html#匹配符-、-、-、" class="sidebar-link">匹配符 、*、！、{}</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#文件操作" class="sidebar-link">文件操作</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#压缩" class="sidebar-link">压缩</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#流控制" class="sidebar-link">流控制</a></li><li class="sidebar-sub-header"><a href="/no.3/gulp.html#工具" class="sidebar-link">工具</a></li></ul></li></ul></li><li><a href="/no.3/jenkins.html" class="sidebar-link">jenkins</a></li><li><a href="/no.3/linux_sed_awk.html" class="sidebar-link">sed与awk</a></li><li><a href="/no.3/linux防火墙.html" class="sidebar-link">linux防火墙</a></li><li><a href="/no.3/nginx-error.html" class="sidebar-link">centos错误集合</a></li><li><a href="/no.3/parcel.html" class="sidebar-link">parcel</a></li><li><a href="/no.3/pm2指南.html" class="sidebar-link">PM2</a></li><li><a href="/no.3/redis.html" class="sidebar-link">/no.3/redis.html</a></li><li><a href="/no.3/rollup.html" class="sidebar-link">rollup</a></li><li><a href="/no.3/vite.html" class="sidebar-link">/no.3/vite.html</a></li><li><a href="/no.3/vite插件指南.html" class="sidebar-link">Vite2插件开发指南</a></li><li><a href="/no.3/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/no.3/yeoman.html" class="sidebar-link">yeoman</a></li><li><a href="/no.3/免密登陆.html" class="sidebar-link">免密登陆</a></li><li><a href="/no.3/文件操作权限.html" class="sidebar-link">Linux权限</a></li><li><a href="/no.3/理解Webpack中的Chunk.html" class="sidebar-link">理解 Webpack 中的 Chunk</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gulp"><a href="#gulp" class="header-anchor">#</a> gulp</h1> <p><strong>Table of Contents</strong> <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank" rel="noopener noreferrer">DocToc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em></p> <ul><li><a href="#gulp">gulp</a> <ul><li><a href="#gulp%E7%AE%80%E4%BB%8B">gulp简介</a></li> <li><a href="#%E5%AE%89%E8%A3%85">安装</a></li> <li><a href="#%E4%BD%9C%E7%94%A8">作用</a></li> <li><a href="#%E5%BA%94%E7%94%A8">应用</a></li> <li><a href="#api">API</a> <ul><li><a href="#src">src</a></li> <li><a href="#symlink">symlink</a></li> <li><a href="#lastrun">lastRun</a></li> <li><a href="#series">series</a></li></ul></li></ul></li></ul> <h2 id="gulp简介"><a href="#gulp简介" class="header-anchor">#</a> gulp简介</h2> <p><a data-fancybox="" title="" href="https://colastar.github.io/static/images/gulp.jpg"><img src="https://colastar.github.io/static/images/gulp.jpg" alt=""></a>
官网介绍gulp是一个流构建系统（The streaming build system）</p> <p>gulp是前端开发过程中对代码进行构建的工具，是自动化项目的构建利器；她不仅能对网站资源进行优化，而且在开发过程中很多重复的任务能够使用正确的工具自动完成；使用它，我们不仅可以很愉快的编写代码，而且大大提高我们的工作效率。</p> <p>gulp是基于Nodejs的自动任务运行器， 她能自动化地完成 <code>javascript/coffee/sass/less/html/image/css</code> 等文件的的测试、检查、合并、压缩、格式化、浏览器自动刷新、部署文件生成，并监听文件在改动后重复指定的这些步骤。在实现上，她借鉴了Unix操作系统的管道（pipe）思想，前一级的输出，直接变成后一级的输入，使得在操作上非常简单。</p> <p>gulp 和 grunt 非常类似，但相比于 grunt 的频繁 IO 操作，gulp 的流操作，能更快地更便捷地完成构建工作。</p> <p>gulp常用地址：</p> <p>gulp官方网址：http://gulpjs.com</p> <p>gulp插件地址：http://gulpjs.com/plugins</p> <p>gulp 官方API：https://github.com/gulpjs/gulp/tree/master/docs/api</p> <p>gulp 中文API：http://www.ydcss.com/archives/424</p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>步骤一：以全局方式安装gulp,执行gulp任务</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install -g gulp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>步骤二：把gulp安装在本地,调用插件的功能</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install --save-dev gulp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h2> <ul><li>Sass/less编译</li> <li>Css Js 图片压缩</li> <li>Css Js 合并</li> <li>Css Js 内联</li> <li>Html的include功能</li> <li>Autoprefixer</li> <li>自动刷新</li> <li>去缓存</li> <li>Handlebars模板文件的预编译</li> <li>雪碧图</li> <li>ESLint rem移动端适配方案</li></ul> <p>gulp有很多插件可以做到你想做的事情,插件<a href="http://gulpjs.com/plugins" target="_blank" rel="noopener noreferrer">地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="应用"><a href="#应用" class="header-anchor">#</a> 应用</h2> <p>安装了gulp以后你需要在你的文件夹里边创建一个gulpfile.js文件，它是gulp的配置文件。在这里边你可以创建你要创建的任务，以及应用各种插件，相当于webpack的webpack.config.js</p> <p>大概就是这样的一份文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//导入工具包 require('node_modules里对应模块')
var gulp = require('gulp'), //本地安装gulp所用到的地方
    concat = require('gulp-concat'),//合并文件 --合并只是放一起--压缩才会真正合并相同样式
    less = require('gulp-less'),//编译less文件
    cssmin = require('gulp-minify-css'),//压缩css文件
    rename = require('gulp-rename'),//设置压缩后的文件名
    autoprefixer = require('gulp-autoprefixer'),//给 CSS 增加前缀。解决某些CSS属性不是标准属性，有各种浏览器前缀的情况
    imagemin = require('gulp-imagemin'),  //图片压缩
    spriter=require('gulp-css-spriter');//合并图片

//编译less文件   定义一个testLess任务（自定义任务名称）
gulp.task('testLess', function () {
    gulp.src('src/less/index.less') //该任务针对的文件
        .pipe(less()) //该任务调用的模块
        .pipe(gulp.dest('src/css')); //将会在src/css下生成index.css
});

//压缩css文件
gulp.task('minifycss', function() {
    gulp.src('src/css/index.css')      //压缩的文件
        .pipe(cssmin())   //执行压缩
        .pipe(gulp.dest('src/cssmin'))   //输出文件夹
});

gulp.task('default',['testLess','minifycss'],function(){//定义默认任务  先执行testLess和minifycss 再执行console.log('hello world');
    console.log('hello world');
}); 

//gulp.task(name[, deps], fn) 定义任务  name：任务名称 deps：依赖任务名称 fn：回调函数
//gulp.src(globs[, options]) 执行任务处理的文件  globs：处理的文件路径(字符串或者字符串数组) 
//gulp.dest(path[, options]) 处理完后文件生成路径
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="api"><a href="#api" class="header-anchor">#</a> <a href="https://github.com/gulpjs/gulp/tree/master/docs/api" target="_blank" rel="noopener noreferrer">API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <h3 id="src"><a href="#src" class="header-anchor">#</a> src</h3> <p>src用于创建一个流用于读取文件系统里的文件对象</p> <blockquote><p>语法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>src(globs, [options])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>globs</code>：是用来监控或者找到文件
<code>options</code>:是你要对你监控文件做的一些事情具</p> <h3 id="dest"><a href="#dest" class="header-anchor">#</a> dest</h3> <p>dest 用于创建一个将文件对象写入文件系统的流，他是一个可以在管道的中间或末尾使用的流</p> <blockquote><p>语法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>dest(directory, [options])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>directory</code>:将写入文件的输出目录的路径。如果使用函数，将使用每个Vinyl对象调用该函数，并且必须返回字符串目录路径。</p> <p><code>options</code>:是你要对你写入文件要做的事情</p> <h3 id="symlink"><a href="#symlink" class="header-anchor">#</a> symlink</h3> <p>symlink 创建用于将Vinyl对象链接到文件系统的流。就是一个符号链接，即其实就是linux里的软连接，就是副本，但是当删除源文件时，软连接文件也会被删除。</p> <blockquote><p>语法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>symlink(directory, [options])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>directory</code>:输出目录的路径，其中将创建符号链接。如果使用函数，将使用每个Vinyl对象调用该函数，并且必须返回字符串目录路径。
<code>options</code>:是你要对你输出目录设置的选项。</p> <h3 id="lastrun"><a href="#lastrun" class="header-anchor">#</a> lastRun</h3> <p>检索在当前运行过程中上次成功完成任务的时间。在观察程序运行时，对后续任务运行最有用。</p> <p>与之结合使用时src()，通过跳过自上次成功完成任务以来未发生更改的文件，启用增量构建以加快执行时间。</p> <p>用法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const { src, dest, lastRun, watch } = require('gulp');
const imagemin = require('gulp-imagemin');

function images() {
  return src('src/images/**/*.jpg', { since: lastRun(images) })
    .pipe(imagemin())
    .pipe(dest('build/img/'));
}

function watch() {
  watch('src/images/**/*.jpg', images);
}

exports.watch = watch;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>语法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>lastRun(task, [precision])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>task</code>:任务函数或已注册任务的字符串别名。</p> <p><code>precision</code>:时间戳精度，默认值：1000</p> <h3 id="series"><a href="#series" class="header-anchor">#</a> series</h3> <p>将任务函数和/或组合操作组合成更大的操作，这些操作将<code>按顺序依次执行</code>。使用series()和组合操作的嵌套深度没有强制限制parallel()。</p> <blockquote><p>语法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>series(...tasks)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>...task</code>:任意数量的任务函数都可以作为单独的参数传递。如果您之前已注册任务，则可以使用字符串，但不建议这样做。</p> <blockquote><p>用法：</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>const { series } = require('gulp');

function javascript(cb) {
  // body omitted
  cb();//相当于回调：官网是这么介绍的应该由一些异步工作调用
}

function css(cb) {
  // body omitted
  cb();
}

exports.build = series(javascript, css);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="parallel"><a href="#parallel" class="header-anchor">#</a> parallel</h3> <p>将任务函数和/或组合操作组合成将<code>同时执行</code>的更大操作。使用series()和组合操作的嵌套深度没有强制限制parallel()</p> <blockquote><p>语法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>parallel(...tasks)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>...task</code>:任意数量的任务函数都可以作为单独的参数传递。如果您之前已注册任务，则可以使用字符串，但不建议这样做。</p> <h3 id="watch"><a href="#watch" class="header-anchor">#</a> watch</h3> <p>允许在发生更改时观看全局并运行任务。任务与任务系统的其余部分统一处理。</p> <blockquote><p>语法：</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>watch(globs, [options], [task])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>参数</p></blockquote> <p><code>globs</code>:需要被监控的文件</p> <p><code>options</code>:控制监控的选项
<code>task</code>:需要被监控的任务</p> <blockquote><p>用法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>const { watch } = require('gulp');

const watcher = watch(['input/*.js']);

watcher.on('change', function(path, stats) {
  console.log(`File ${path} was changed`);
});

watcher.on('add', function(path, stats) {
  console.log(`File ${path} was added`);
});

watcher.on('unlink', function(path, stats) {
  console.log(`File ${path} was removed`);
});

watcher.close();//关闭监控
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="task"><a href="#task" class="header-anchor">#</a> task</h3> <p>定义任务系统中的任务。任务然后可以通过命令行和访问series()，parallel()以及lastRun()API的。</p> <blockquote><p>语法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>task([taskName], taskFunction)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>参数</p> <p><code>taskName</code>：任务名称</p> <p><code>taskFunction</code>: 一个任务功能或组成的工作-通过产生series()和parallel()。理想情况下是命名函数。可以附加任务元数据以向命令行提供额外信息。</p> <blockquote><p>用法：</p></blockquote> <p>将命名函数注册为任务：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const { task } = require('gulp');

function build(cb) {
  // body omitted
  cb();
}

task(build);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>将匿名函数注册为任务：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const { task } = require('gulp');

task('build', function(cb) {
  // body omitted
  cb();
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>检索先前已注册的任务：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const { task } = require('gulp');

task('build', function(cb) {
  // body omitted
  cb();
});

const build = task('build');`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="registry"><a href="#registry" class="header-anchor">#</a> registry</h3> <p>允许将自定义注册表插入任务系统，该任务系统可以提供共享任务或增强功能。</p> <p>未测试（后续更新）</p> <h3 id="tree"><a href="#tree" class="header-anchor">#</a> tree</h3> <p>获取当前任务依赖关系树 - 在极少数情况下需要它。</p> <p>通常，tree()gulp使用者不会使用它，但它是暴露的，因此CLI可以显示gulpfile中定义的任务的依赖关系图</p> <h3 id="vinyl"><a href="#vinyl" class="header-anchor">#</a> Vinyl</h3> <p>虚拟文件格式。读取文件时src()，会生成Vinyl对象来表示文件 - 包括路径，内容和其他元数据。</p> <p>Vinyl对象可以使用插件进行转换。它们也可以使用持久化到文件系统dest()。</p> <p>创建自己的Vinyl对象时src()- 使用外部vinyl模块而不是生成- 如下面的用法所示。</p> <blockquote><p>用法</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>const Vinyl = require('vinyl');

const file = new Vinyl({
  cwd: '/',
  base: '/test/',
  path: '/test/file.js',
  contents: new Buffer('var x = 123')
});

file.relative === 'file.js';

file.dirname === '/test';
file.dirname = '/specs';
file.path === '/specs/file.js';

file.basename === 'file.js';
file.basename = 'file.txt';
file.path === '/specs/file.txt';

file.stem === 'file';
file.stem = 'foo';
file.path === '/specs/foo.txt';
file.extname === '.txt';
file.extname = '.js';
file.path === '/specs/file.js';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="一些常用的插件"><a href="#一些常用的插件" class="header-anchor">#</a> 一些常用的插件</h2> <p>官网的插件太多了，下面就是介绍一些常用的插件，<a href="http://gulpjs.com/plugins" target="_blank" rel="noopener noreferrer">官网插件地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="匹配符-、-、-、"><a href="#匹配符-、-、-、" class="header-anchor">#</a> 匹配符 *、**、！、{}</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>gulp.src('./js/*.js')               // * 匹配js文件夹下所有.js格式的文件
gulp.src('./js/**/*.js')            // ** 匹配js文件夹的0个或多个子文件夹
gulp.src(['./js/*.js','!./js/index.js'])    // ! 匹配除了index.js之外的所有js文件
gulp.src('./js/**/{omui,common}.js')        // {} 匹配{}里的文件名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="文件操作"><a href="#文件操作" class="header-anchor">#</a> 文件操作</h3> <h4 id="del-替代gulp-clean"><a href="#del-替代gulp-clean" class="header-anchor">#</a> del (替代gulp-clean)</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>var del = require('del');

del('./dist');                      // 删除整个dist文件夹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="gulp-rename"><a href="#gulp-rename" class="header-anchor">#</a> gulp-rename</h4> <p><strong>描述</strong>：重命名文件。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var rename = require(&quot;gulp-rename&quot;);

gulp.src('./hello.txt')
  .pipe(rename('gb/goodbye.md'))    // 直接修改文件名和路径
  .pipe(gulp.dest('./dist')); 
 
gulp.src('./hello.txt')
  .pipe(rename({
    dirname: &quot;text&quot;,                // 路径名
    basename: &quot;goodbye&quot;,            // 主文件名
    prefix: &quot;pre-&quot;,                 // 前缀
    suffix: &quot;-min&quot;,                 // 后缀
    extname: &quot;.html&quot;                // 扩展名
  }))
  .pipe(gulp.dest('./dist'));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="gulp-concat"><a href="#gulp-concat" class="header-anchor">#</a> gulp-concat</h4> <p><strong>描述</strong>：合并文件。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var concat = require('gulp-concat');

gulp.src('./js/*.js')
    .pipe(concat('all.js'))         // 合并all.js文件
    .pipe(gulp.dest('./dist'));
    
gulp.src(['./js/demo1.js','./js/demo2.js','./js/demo2.js'])
    .pipe(concat('all.js'))         // 按照[]里的顺序合并文件
    .pipe(gulp.dest('./dist'));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="gulp-filter"><a href="#gulp-filter" class="header-anchor">#</a> gulp-filter</h4> <p><strong>描述</strong>：在虚拟文件流中过滤文件。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var filter = require('gulp-filter');

const f = filter(['**', '!*/index.js']);
gulp.src('js/**/*.js')
    .pipe(f)                        // 过滤掉index.js这个文件
    .pipe(gulp.dest('dist'));

const f1 = filter(['**', '!*/index.js'], {restore: true});
gulp.src('js/**/*.js')
    .pipe(f1)                       // 过滤掉index.js这个文件
    .pipe(uglify())                 // 对其他文件进行压缩
    .pipe(f1.restore)               // 返回到未过滤执行的所有文件
    .pipe(gulp.dest('dist'));       // 再对所有文件操作，包括index.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="压缩"><a href="#压缩" class="header-anchor">#</a> 压缩</h3> <h4 id="gulp-uglify"><a href="#gulp-uglify" class="header-anchor">#</a> gulp-uglify</h4> <p><strong>描述</strong>：压缩js文件大小。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var uglify = require(&quot;gulp-uglify&quot;);

gulp.src('./hello.js')
    .pipe(uglify())                 // 直接压缩hello.js
    .pipe(gulp.dest('./dist'))
    
 gulp.src('./hello.js')
    .pipe(uglify({
        mangle: true,               // 是否修改变量名，默认为 true
        compress: true,             // 是否完全压缩，默认为 true
        preserveComments: 'all'     // 保留所有注释
    }))
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="gulp-csso-gulp-minify-css"><a href="#gulp-csso-gulp-minify-css" class="header-anchor">#</a> gulp-csso | gulp-minify-css</h4> <p><strong>描述</strong>：压缩优化css。</p> <p>var csso = require('gulp-csso');</p> <p>gulp.src('./css/*.css')
.pipe(csso())
.pipe(gulp.dest('./dist/css'))</p> <h4 id="gulp-html-minify"><a href="#gulp-html-minify" class="header-anchor">#</a> gulp-html-minify</h4> <p><strong>描述</strong>：压缩HTML。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var htmlminify = require('gulp-html-minify');

gulp.src('index.html')
    .pipe(htmlminify())
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="gulp-imagemin"><a href="#gulp-imagemin" class="header-anchor">#</a> gulp-imagemin</h4> <p><strong>描述</strong>：压缩图片。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var imagemin = require('gulp-imagemin');

gulp.src('./img/*.{jpg,png,gif,ico}')
    .pipe(imagemin())
    .pipe(gulp.dest('./dist/img'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="gulp-zip"><a href="#gulp-zip" class="header-anchor">#</a> gulp-zip</h4> <p><strong>描述</strong>：ZIP压缩文件。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var zip = require('gulp-zip');

gulp.src('./src/*')
    .pipe(zip('all.zip'))                   // 压缩成all.zip文件
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="js-css自动注入"><a href="#js-css自动注入" class="header-anchor">#</a> JS/CSS自动注入</h4> <h4 id="gulp-autoprefixer"><a href="#gulp-autoprefixer" class="header-anchor">#</a> gulp-autoprefixer</h4> <p><strong>描述</strong>：自动为css添加浏览器前缀。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var autoprefixer = require('gulp-autoprefixer');

gulp.src('./css/*.css')
    .pipe(autoprefixer())           // 直接添加前缀
    .pipe(gulp.dest('dist'))

gulp.src('./css/*.css')
    .pipe(autoprefixer({
        browsers: ['last 2 versions'],      // 浏览器版本
        cascade：true                       // 美化属性，默认true
        add: true                           // 是否添加前缀，默认true
        remove: true                        // 删除过时前缀，默认true
        flexbox: true                       // 为flexbox属性添加前缀，默认true
    }))
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>查看更多配置：<a href="https://github.com/postcss/autoprefixer#options" target="_blank" rel="noopener noreferrer">options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>更多浏览器版本：<a href="https://github.com/ai/browserslist#queries" target="_blank" rel="noopener noreferrer">browsers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="gulp-useref"><a href="#gulp-useref" class="header-anchor">#</a> gulp-useref</h4> <p><strong>描述</strong>：解析构建块在HTML文件来代替引用未经优化的脚本和样式表。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// index.html

&lt;!-- build:css /css/all.css --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;css/normalize.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;css/main.css&quot;&gt;
&lt;!-- endbuild --&gt;

// gulpfile.js

var useref = require('gulp-useref');

gulp.src('index.html')
    .pipe(useref())
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>替换之后的index.html中就会变成：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/all.css&quot;&gt;  // 之前的两个&lt;link&gt;替换成一个了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="gulp-rev"><a href="#gulp-rev" class="header-anchor">#</a> gulp-rev</h4> <p><strong>描述</strong>：给静态资源文件名添加hash值:unicorn.css =&gt; unicorn-d41d8cd98f.css</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var rev = require('gulp-rev');

gulp.src('./css/*.css')
    .pipe(rev())
    .pipe(gulp.dest('./dist/css'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="gulp-rev-replace"><a href="#gulp-rev-replace" class="header-anchor">#</a> gulp-rev-replace</h4> <p><strong>描述</strong>：重写被gulp-rev重命名的文件名。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var rev = require('gulp-rev');
var revReplace = require('gulp-rev-replace');
var useref = require('gulp-useref');

gulp.src('index.html')
    .pipe(useref())                         // 替换HTML中引用的css和js
    .pipe(rev())                            // 给css,js,html加上hash版本号
    .pipe(revReplace())                     // 把引用的css和js替换成有版本号的名字
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="gulp-html-replace"><a href="#gulp-html-replace" class="header-anchor">#</a> gulp-html-replace</h4> <p><strong>描述</strong>：替换html中的构建块。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// index.html

&lt;!-- build:css --&gt;                          // css是buildName,可以自己定义
&lt;link rel=&quot;stylesheet&quot; href=&quot;css/normalize.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;css/main.css&quot;&gt;
&lt;!-- endbuild --&gt;

// gulpfile.js

var htmlreplace = require('gulp-html-replace');

gulp.src('index.html')
    .pipe(htmlreplace({
        'css':'all.css'                     // css是index.html中定义的buildName
    }))
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>替换之后的index.html中就会变成：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;all.css&quot;&gt;      // 之前的两个&lt;link&gt;替换成一个了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="流控制"><a href="#流控制" class="header-anchor">#</a> 流控制</h3> <h4 id="gulp-if"><a href="#gulp-if" class="header-anchor">#</a> gulp-if</h4> <p><strong>描述</strong>：有条件地运行一个任务。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var gulpif = require('gulp-if');
var uglify = require('gulp-uglify');
var concat = require('gulp-concat');
var condition = true; 

gulp.src('./js/*.js')
    .pipe(gulpif(condition, uglify(), concat('all.js')))  // condition为true时执行uglify(), else 执行concat('all.js')
    .pipe(gulp.dest('./dist/'));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="工具"><a href="#工具" class="header-anchor">#</a> 工具</h3> <h4 id="gulp-load-plugins"><a href="#gulp-load-plugins" class="header-anchor">#</a> gulp-load-plugins</h4> <p><strong>描述</strong>：从包的依赖和附件里加载gulp插件到一个对象里给你选择。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// package.json 

&quot;devDependencies&quot;: {
    &quot;gulp&quot;: &quot;^3.9.1&quot;,
    &quot;gulp-concat&quot;: &quot;^2.6.1&quot;,
    &quot;gulp-rename&quot;: &quot;^1.2.2&quot;,
    &quot;gulp-uglify&quot;: &quot;^2.0.1&quot;
}

// gulpfile.js

var $ = require('gulp-load-plugins')();     // $ 是一个对象,加载了依赖里的插件

gulp.src('./**/*.js')
    .pipe($.concat('all.js'))               // 使用插件就可以用$.PluginsName()
    .pipe($.uglify())
    .pipe($.rename('all.min.js'))
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="gulp-sass"><a href="#gulp-sass" class="header-anchor">#</a> gulp-sass</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>var sass = require('gulp-sass');

gulp.src('./sass/**/*.scss')
    .pipe(sass({
        outputStyle: 'compressed'           // 配置输出方式,默认为nested
    }))
    .pipe(gulp.dest('./dist/css'));
    
gulp.watch('./sass/**/*.scss', ['sass']);   // 实时监听sass文件变动,执行sass任务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="gulp-less"><a href="#gulp-less" class="header-anchor">#</a> gulp-less</h4> <p><strong>描述</strong> :编译Less</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var gulp = require('gulp'),
    less = require(&quot;gulp-less&quot;);
 
gulp.task('compile-less', function () {
    gulp.src('less/*.less')
    .pipe(less())
    .pipe(gulp.dest('dist/css'));
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="gulp-babel"><a href="#gulp-babel" class="header-anchor">#</a> gulp-babel</h4> <p><strong>描述</strong>：将ES6代码编译成ES5。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var babel = require('gulp-babel');

gulp.src('./js/index.js')
    .pipe(babel({
        presets: ['es2015']
    }))
    .pipe(gulp.dest('./dist'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="gulp-jshint-js代码检查"><a href="#gulp-jshint-js代码检查" class="header-anchor">#</a> gulp-jshint    JS代码检查</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>var gulp = require('gulp');
var jshint = require(&quot;gulp-jshint&quot;);
 
gulp.task('jsLint', function () {
    gulp.src('js/*.js')
    .pipe(jshint())
    .pipe(jshint.reporter()); // 输出检查结果
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="gulp-livereload-自动刷新"><a href="#gulp-livereload-自动刷新" class="header-anchor">#</a> gulp-livereload 自动刷新</h4> <p><strong>描述</strong>：当代码变化时，它可以帮助我们自动刷新页面，该插件最好配合谷歌浏览器，且要安装livereload chrome extension扩展插件，否则无效。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var gulp = require('gulp'),
    less = require('gulp-less'),
    livereload = require('gulp-livereload');
 
gulp.task('less', function() {
  gulp.src('less/*.less')
    .pipe(less())
    .pipe(gulp.dest('css'))
    .pipe(livereload());
});
 
gulp.task('watch', function() {
  livereload.listen(); //要在这里调用listen()方法
  gulp.watch('less/*.less', ['less']);  //监听目录下的文件，若文件发生变化，则调用less任务。
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="gulp-cached-缓存构建过的文件"><a href="#gulp-cached-缓存构建过的文件" class="header-anchor">#</a> gulp-cached 缓存构建过的文件</h4> <p><strong>描述</strong>：就是将构建过的文件，生成一个hash，缓存在内存中，直到这个文件被更新，则只更新这个文件，而不再会一次性重新构建全部监控文件。</p> <p><strong>对比gulp-watch</strong>：它不会管你当前更新的是哪个文件，总之，当你告诉他监控某个目录，那么当这个目录里有某个文件更新了，他就会一次性的把目录下的文件全部执行一次task</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var cached = require('gulp-cached');
var print = require('gulp-print');

gulp.task('esx-component', function() {
	gulp.src(esxSrc)
	    .pipe(cached('esx-component'))
	    .pipe(print())
	    .pipe(babel({
		    presets: ['react', 'es2015'],
		    plugins: [
			    &quot;transform-es2015-block-scoping&quot;,
			    &quot;transform-class-properties&quot;,
			    &quot;transform-es2015-computed-properties&quot;,
			    &quot;transform-es2015-modules-amd&quot;
		    ]
	    }))
	    .pipe(gulp.dest('./public/js/component'));
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/17/2022, 3:20:27 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/no.3/grunt.html" class="prev">
        grunt
      </a></span> <span class="next"><a href="/no.3/jenkins.html">
        jenkins
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a49ca15b.js" defer></script><script src="/assets/js/2.2b4afd4e.js" defer></script><script src="/assets/js/64.8f1bfde4.js" defer></script>
  </body>
</html>
