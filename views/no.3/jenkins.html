<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jenkins介绍和初始化安装 | 个人博客</title>
    <meta name="description" content="空里流霜不觉飞，汀上白沙看不见。">
    <link rel="icon" href="./public/favicon.ico">
  <link rel="manifest" href="./public/manifest.json">
  <link rel="apple-touch-icon" href="./public/images/logo.png">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="./js/tj.js"></script>
  <script src="./js/code.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/blogs/views/assets/css/0.styles.16aae78f.css" as="style"><link rel="preload" href="/blogs/views/assets/js/app.3da757de.js" as="script"><link rel="preload" href="/blogs/views/assets/js/2.d340cefd.js" as="script"><link rel="preload" href="/blogs/views/assets/js/56.740f904a.js" as="script"><link rel="prefetch" href="/blogs/views/assets/js/10.f7ebbe6b.js"><link rel="prefetch" href="/blogs/views/assets/js/100.80307fa1.js"><link rel="prefetch" href="/blogs/views/assets/js/101.f409181f.js"><link rel="prefetch" href="/blogs/views/assets/js/102.e364ce11.js"><link rel="prefetch" href="/blogs/views/assets/js/103.26d27695.js"><link rel="prefetch" href="/blogs/views/assets/js/104.f06ac130.js"><link rel="prefetch" href="/blogs/views/assets/js/105.c921b889.js"><link rel="prefetch" href="/blogs/views/assets/js/106.b1825d1c.js"><link rel="prefetch" href="/blogs/views/assets/js/107.959c8437.js"><link rel="prefetch" href="/blogs/views/assets/js/108.a3d5509b.js"><link rel="prefetch" href="/blogs/views/assets/js/109.bb4689e6.js"><link rel="prefetch" href="/blogs/views/assets/js/11.5394dbb4.js"><link rel="prefetch" href="/blogs/views/assets/js/110.895294a6.js"><link rel="prefetch" href="/blogs/views/assets/js/111.f86f0a39.js"><link rel="prefetch" href="/blogs/views/assets/js/112.9d108d50.js"><link rel="prefetch" href="/blogs/views/assets/js/113.c9dbae36.js"><link rel="prefetch" href="/blogs/views/assets/js/114.4d5c8e7e.js"><link rel="prefetch" href="/blogs/views/assets/js/115.7e433280.js"><link rel="prefetch" href="/blogs/views/assets/js/116.2a1a97d6.js"><link rel="prefetch" href="/blogs/views/assets/js/117.8af560a7.js"><link rel="prefetch" href="/blogs/views/assets/js/118.d7f3d3f9.js"><link rel="prefetch" href="/blogs/views/assets/js/119.aa7dbd14.js"><link rel="prefetch" href="/blogs/views/assets/js/12.1c3de10b.js"><link rel="prefetch" href="/blogs/views/assets/js/120.202fe4c2.js"><link rel="prefetch" href="/blogs/views/assets/js/121.4259e3ad.js"><link rel="prefetch" href="/blogs/views/assets/js/122.6da8904b.js"><link rel="prefetch" href="/blogs/views/assets/js/123.4c91b3b6.js"><link rel="prefetch" href="/blogs/views/assets/js/124.f5a0dc4f.js"><link rel="prefetch" href="/blogs/views/assets/js/125.578d955c.js"><link rel="prefetch" href="/blogs/views/assets/js/126.f28705ed.js"><link rel="prefetch" href="/blogs/views/assets/js/127.d1ce6c9e.js"><link rel="prefetch" href="/blogs/views/assets/js/128.90bc4bd5.js"><link rel="prefetch" href="/blogs/views/assets/js/129.bbf34fe0.js"><link rel="prefetch" href="/blogs/views/assets/js/13.54915215.js"><link rel="prefetch" href="/blogs/views/assets/js/130.a8934dcd.js"><link rel="prefetch" href="/blogs/views/assets/js/131.50cff906.js"><link rel="prefetch" href="/blogs/views/assets/js/132.409a5a71.js"><link rel="prefetch" href="/blogs/views/assets/js/14.6209f1f1.js"><link rel="prefetch" href="/blogs/views/assets/js/15.4f013697.js"><link rel="prefetch" href="/blogs/views/assets/js/16.8cba17f0.js"><link rel="prefetch" href="/blogs/views/assets/js/17.12259d6a.js"><link rel="prefetch" href="/blogs/views/assets/js/18.debd0a73.js"><link rel="prefetch" href="/blogs/views/assets/js/19.020d8b58.js"><link rel="prefetch" href="/blogs/views/assets/js/20.7d79d8c1.js"><link rel="prefetch" href="/blogs/views/assets/js/21.9419432f.js"><link rel="prefetch" href="/blogs/views/assets/js/22.6e462c18.js"><link rel="prefetch" href="/blogs/views/assets/js/23.29e804ad.js"><link rel="prefetch" href="/blogs/views/assets/js/24.0c93a9d3.js"><link rel="prefetch" href="/blogs/views/assets/js/25.32c81ad6.js"><link rel="prefetch" href="/blogs/views/assets/js/26.05f8a0b0.js"><link rel="prefetch" href="/blogs/views/assets/js/27.358c2bb4.js"><link rel="prefetch" href="/blogs/views/assets/js/28.c9cc3781.js"><link rel="prefetch" href="/blogs/views/assets/js/29.7e6061fe.js"><link rel="prefetch" href="/blogs/views/assets/js/3.9c816438.js"><link rel="prefetch" href="/blogs/views/assets/js/30.75e51610.js"><link rel="prefetch" href="/blogs/views/assets/js/31.0146e582.js"><link rel="prefetch" href="/blogs/views/assets/js/32.62196059.js"><link rel="prefetch" href="/blogs/views/assets/js/33.687afa6b.js"><link rel="prefetch" href="/blogs/views/assets/js/34.ade0fe59.js"><link rel="prefetch" href="/blogs/views/assets/js/35.091c6be4.js"><link rel="prefetch" href="/blogs/views/assets/js/36.e591c236.js"><link rel="prefetch" href="/blogs/views/assets/js/37.0f082e2c.js"><link rel="prefetch" href="/blogs/views/assets/js/38.e8d1b7b5.js"><link rel="prefetch" href="/blogs/views/assets/js/39.8d020b25.js"><link rel="prefetch" href="/blogs/views/assets/js/4.24ea45a9.js"><link rel="prefetch" href="/blogs/views/assets/js/40.8a5b6e5e.js"><link rel="prefetch" href="/blogs/views/assets/js/41.bd1e3d42.js"><link rel="prefetch" href="/blogs/views/assets/js/42.2e7341a8.js"><link rel="prefetch" href="/blogs/views/assets/js/43.ca7513f0.js"><link rel="prefetch" href="/blogs/views/assets/js/44.061f79c0.js"><link rel="prefetch" href="/blogs/views/assets/js/45.0b9f3ef0.js"><link rel="prefetch" href="/blogs/views/assets/js/46.74047de7.js"><link rel="prefetch" href="/blogs/views/assets/js/47.315cdc11.js"><link rel="prefetch" href="/blogs/views/assets/js/48.6d193d89.js"><link rel="prefetch" href="/blogs/views/assets/js/49.a4f9fe1f.js"><link rel="prefetch" href="/blogs/views/assets/js/5.588c5e99.js"><link rel="prefetch" href="/blogs/views/assets/js/50.562ee0a3.js"><link rel="prefetch" href="/blogs/views/assets/js/51.491c24d0.js"><link rel="prefetch" href="/blogs/views/assets/js/52.d5669978.js"><link rel="prefetch" href="/blogs/views/assets/js/53.daaf52d4.js"><link rel="prefetch" href="/blogs/views/assets/js/54.c277d528.js"><link rel="prefetch" href="/blogs/views/assets/js/55.575ec344.js"><link rel="prefetch" href="/blogs/views/assets/js/57.95b5c902.js"><link rel="prefetch" href="/blogs/views/assets/js/58.6c9440d3.js"><link rel="prefetch" href="/blogs/views/assets/js/59.ca13972f.js"><link rel="prefetch" href="/blogs/views/assets/js/6.9b4144c4.js"><link rel="prefetch" href="/blogs/views/assets/js/60.6fc16eca.js"><link rel="prefetch" href="/blogs/views/assets/js/61.116d0e9b.js"><link rel="prefetch" href="/blogs/views/assets/js/62.e1506c4c.js"><link rel="prefetch" href="/blogs/views/assets/js/63.76d9cd0b.js"><link rel="prefetch" href="/blogs/views/assets/js/64.546166a2.js"><link rel="prefetch" href="/blogs/views/assets/js/65.4d3d8d4c.js"><link rel="prefetch" href="/blogs/views/assets/js/66.b45e2ad6.js"><link rel="prefetch" href="/blogs/views/assets/js/67.6e5c2ab0.js"><link rel="prefetch" href="/blogs/views/assets/js/68.044fdd50.js"><link rel="prefetch" href="/blogs/views/assets/js/69.afec5ecb.js"><link rel="prefetch" href="/blogs/views/assets/js/7.22fd16b7.js"><link rel="prefetch" href="/blogs/views/assets/js/70.d68b77fa.js"><link rel="prefetch" href="/blogs/views/assets/js/71.98b9a618.js"><link rel="prefetch" href="/blogs/views/assets/js/72.fba33285.js"><link rel="prefetch" href="/blogs/views/assets/js/73.74bfc4be.js"><link rel="prefetch" href="/blogs/views/assets/js/74.03773869.js"><link rel="prefetch" href="/blogs/views/assets/js/75.e26536f3.js"><link rel="prefetch" href="/blogs/views/assets/js/76.2ee62b9f.js"><link rel="prefetch" href="/blogs/views/assets/js/77.113d2818.js"><link rel="prefetch" href="/blogs/views/assets/js/78.5cbf364b.js"><link rel="prefetch" href="/blogs/views/assets/js/79.a098a7e1.js"><link rel="prefetch" href="/blogs/views/assets/js/8.ed426eb8.js"><link rel="prefetch" href="/blogs/views/assets/js/80.e31bcf3e.js"><link rel="prefetch" href="/blogs/views/assets/js/81.61256886.js"><link rel="prefetch" href="/blogs/views/assets/js/82.581a81b8.js"><link rel="prefetch" href="/blogs/views/assets/js/83.94255437.js"><link rel="prefetch" href="/blogs/views/assets/js/84.b0196448.js"><link rel="prefetch" href="/blogs/views/assets/js/85.7e107469.js"><link rel="prefetch" href="/blogs/views/assets/js/86.271e2a45.js"><link rel="prefetch" href="/blogs/views/assets/js/87.1e64838e.js"><link rel="prefetch" href="/blogs/views/assets/js/88.09edecd2.js"><link rel="prefetch" href="/blogs/views/assets/js/89.45cd2bf6.js"><link rel="prefetch" href="/blogs/views/assets/js/9.dd3837f2.js"><link rel="prefetch" href="/blogs/views/assets/js/90.2040c560.js"><link rel="prefetch" href="/blogs/views/assets/js/91.b90df767.js"><link rel="prefetch" href="/blogs/views/assets/js/92.7fb4faba.js"><link rel="prefetch" href="/blogs/views/assets/js/93.a3df8ebc.js"><link rel="prefetch" href="/blogs/views/assets/js/94.2db54432.js"><link rel="prefetch" href="/blogs/views/assets/js/95.6651152b.js"><link rel="prefetch" href="/blogs/views/assets/js/96.9aa317d8.js"><link rel="prefetch" href="/blogs/views/assets/js/97.c6695f72.js"><link rel="prefetch" href="/blogs/views/assets/js/98.4dc10358.js"><link rel="prefetch" href="/blogs/views/assets/js/99.d5a47f1f.js">
    <link rel="stylesheet" href="/blogs/views/assets/css/0.styles.16aae78f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/views/" class="home-link router-link-active"><!----> <span class="site-name">个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blogs/views/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/views/no.0/js/es6.html" class="nav-link">前端基础</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/javascript-QA/javascriptqa.html" class="nav-link">javaScript与测试工程师</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.1/函数式编程/函数式编程.html" class="nav-link">编程相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.2/http.html" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.3/webpack.html" class="nav-link">前端自动化</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.4/前端性能优化.html" class="nav-link">前端优化</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.5/css工作流.html" class="nav-link">css相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.6/react/react.html" class="nav-link">框架相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.7/计算机组成原理.html" class="nav-link">跨界</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.8/数据结构与算法.html" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/node/node/node.html" class="nav-link">node相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/other/git/git命令全集.html" class="nav-link">其他相关</a></li></ul></div></div><div class="nav-item"><a href="/blogs/views/no.1/" class="nav-link">面试</a></div><div class="nav-item"><a href="https://github.com/ColaStar/blogs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blogs/views/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/views/no.0/js/es6.html" class="nav-link">前端基础</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/javascript-QA/javascriptqa.html" class="nav-link">javaScript与测试工程师</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.1/函数式编程/函数式编程.html" class="nav-link">编程相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.2/http.html" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.3/webpack.html" class="nav-link">前端自动化</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.4/前端性能优化.html" class="nav-link">前端优化</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.5/css工作流.html" class="nav-link">css相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.6/react/react.html" class="nav-link">框架相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.7/计算机组成原理.html" class="nav-link">跨界</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.8/数据结构与算法.html" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/node/node/node.html" class="nav-link">node相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/other/git/git命令全集.html" class="nav-link">其他相关</a></li></ul></div></div><div class="nav-item"><a href="/blogs/views/no.1/" class="nav-link">面试</a></div><div class="nav-item"><a href="https://github.com/ColaStar/blogs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blogs/views/no.3/LINUX创建文件和目录的默认权限.html" class="sidebar-link">LINUX创建文件和目录的默认权限</a></li><li><a href="/blogs/views/no.3/bower.html" class="sidebar-link">bower</a></li><li><a href="/blogs/views/no.3/browserify.html" class="sidebar-link">Browserify</a></li><li><a href="/blogs/views/no.3/commojs-vs-es6module.html" class="sidebar-link">模块规范对比</a></li><li><a href="/blogs/views/no.3/grunt.html" class="sidebar-link">grunt</a></li><li><a href="/blogs/views/no.3/gulp.html" class="sidebar-link">gulp简介</a></li><li><a href="/blogs/views/no.3/jenkins.html" class="active sidebar-link">jenkins介绍和初始化安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#_1-jenkins介绍" class="sidebar-link">1.jenkins介绍</a></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#_2-jenkins运行环境搭建" class="sidebar-link">2.jenkins运行环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#_2-1获取代码" class="sidebar-link">2.1获取代码</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#_3-发布jenkins服务" class="sidebar-link">3.发布jenkins服务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#一、安装jenkins" class="sidebar-link">一、安装jenkins</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#二、进入jenkins" class="sidebar-link">二、进入jenkins</a></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#jenkins配置（系统管理）" class="sidebar-link">jenkins配置（系统管理）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#_1-全局安全配置" class="sidebar-link">1.全局安全配置</a></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#_2-插件管理" class="sidebar-link">2.插件管理</a></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#进入全局工具配置" class="sidebar-link">进入全局工具配置</a></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#系统配置" class="sidebar-link">系统配置</a></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#linux系统安装nodejs及其包管理工具" class="sidebar-link">Linux系统安装nodejs及其包管理工具</a></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#在nodejs官网下载最新包" class="sidebar-link">在nodejs官网下载最新包</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/views/no.3/jenkins.html#配置任务" class="sidebar-link">配置任务</a></li></ul></li><li><a href="/blogs/views/no.3/linux_sed_awk.html" class="sidebar-link">centos7之sed和awk常用</a></li><li><a href="/blogs/views/no.3/linux防火墙.html" class="sidebar-link">linux防火墙</a></li><li><a href="/blogs/views/no.3/nginx-error.html" class="sidebar-link">centos启动Nginx提示nginx: [emerg] still could not bind()</a></li><li><a href="/blogs/views/no.3/parcel.html" class="sidebar-link">parcel</a></li><li><a href="/blogs/views/no.3/pm2指南.html" class="sidebar-link">PM2使用指南</a></li><li><a href="/blogs/views/no.3/rollup.html" class="sidebar-link">rollupjs快速入门</a></li><li><a href="/blogs/views/no.3/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/blogs/views/no.3/yeoman.html" class="sidebar-link">yeoman</a></li><li><a href="/blogs/views/no.3/免密登陆.html" class="sidebar-link">免密登陆</a></li><li><a href="/blogs/views/no.3/文件操作权限.html" class="sidebar-link">Linux命令:修改文件权限命令chmod、chgrp、chown详解</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jenkins介绍和初始化安装"><a href="#jenkins介绍和初始化安装" aria-hidden="true" class="header-anchor">#</a> jenkins介绍和初始化安装</h1> <h2 id="_1-jenkins介绍"><a href="#_1-jenkins介绍" aria-hidden="true" class="header-anchor">#</a> 1.jenkins介绍</h2> <p>jenkins目前最流行的一款持续集成及自动化部署工具。</p> <p>jenkins产品发布流程(<strong>java</strong>)</p> <p><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins%E4%BA%A7%E5%93%81%E5%8F%91%E5%B8%83%E6%B5%81%E7%A8%8B.png" alt=""></p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_流程图3.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_%E6%B5%81%E7%A8%8B%E5%9B%BE3.jpg" alt=""></a></p> <p>通过上图可以看到，jenkins帮我们持续、自动地构建/测试软件项目。</p> <p>搭建上述持续集成环境可以把整个构建、部署过程自动化，很大程度上减轻工作量。 对于程序员的日常开发来说不会造成任何额外负担——自己把代码提交上去之后，服务 器上运行的马上就是最新版本——一切都发生在无形中。</p> <h2 id="_2-jenkins运行环境搭建"><a href="#_2-jenkins运行环境搭建" aria-hidden="true" class="header-anchor">#</a> 2.jenkins运行环境搭建</h2> <p>通过上图可分析出，jenkins需要获取项目代码，打包，部署</p> <p>以centos7为例搭建环境，首先我们得安装一个jdk，直接yum就完事了，然后配下环境变量</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-1获取代码"><a href="#_2-1获取代码" aria-hidden="true" class="header-anchor">#</a> 2.1获取代码</h3> <p>可以从svn或者git中获取，需要在jenkins所在服务器上安装svn或者git</p> <blockquote><p>安装git</p></blockquote> <ul><li>1.安装编译git需要的包</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install -y curl-devel expat-devel gettext-devel openssl-devel zlib-devel

yum install -y gcc perl-ExtUtils-MakeMaker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>2.下载git源码并解压</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>wget https://github.com/git/git/archive/v2.3.0.zip

unzip v2.3.0.zip

cd git-2.3.0

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>3.编译安装：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>将其安装在“/usr/local/git”目录下。

make prefix=/usr/local/git all

make prefix=/usr/local/git install
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>因为服务器时间不对编译的过程中报错如下图，使用ntpdate自动校正系统时间。报错“<code>Writing perl.mak for Git make[2]: *** [perl.mak] Error 1</code>”，请重启a服务，<code>service httpd restart</code>。
<img src="https://raw.githubusercontent.com/ColaStar/static/master/images/ntpdate.png" alt=""></p> <ul><li>4.编译完成之后使用git --version</li></ul> <p>查看git版本，居然还是1.7.1，</p> <p>这是因为它默认使用了&quot;/usr/bin&quot;下的git。</p> <p>你可以用下面的命令查看git所在的路径：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ whereis git

git: /usr/bin/git /usr/local/git /usr/share/man/man1/git.1.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/whereis-git.png" alt=""></p> <ul><li>5.把git路径放到环境变量里</li></ul> <p>我们要把编译安装的git路径放到环境变量里，让它替换&quot;/usr/bin&quot;下的git。为此我们可以修改“/etc/profile”文件（或者/etc/bashrc文件）
···
vim /etc/profile</p> <p>然后在文件的最后一行，添加下面的内容，然后保存退出。</p> <p>export PATH=/usr/local/git/bin:$PATH
···
<img src="https://raw.githubusercontent.com/ColaStar/static/master/images/unset-f.png" alt=""></p> <p>然后执行一下profile文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>source /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后再次使用git --version 查看git版本，发现输出2.3.0，表明安装成功。
<img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item22.png" alt=""></p> <h2 id="_3-发布jenkins服务"><a href="#_3-发布jenkins服务" aria-hidden="true" class="header-anchor">#</a> 3.发布jenkins服务</h2> <h3 id="一、安装jenkins"><a href="#一、安装jenkins" aria-hidden="true" class="header-anchor">#</a> 一、安装jenkins</h3> <blockquote><p>1、添加yum repos，然后安装</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat/jenkins.repo
sudo rpm --import https://pkg.jenkins.io/redhat/jenkins.io.key
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注：如果上边的执行成功就不用再执行这两行了</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/RedHat/jenkins.repo
sudo rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注：如果网络不好需要重试几次</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo yum install jenkins
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>2、如果未安装java还需安装java或者jdk或者jre</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo yum install java
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>3、启动和停止</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo service jenkins start
sudo service jenkins stop
sudo service jenkins restart

sudo chkconfig jenkins on
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果启动失败，可以运行如下命令查看错误信息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl status jenkins.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item23.png" alt=""></p> <p>如上错误是java配置错误，需要修改jenkins配置文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vi /etc/rc.d/init.d/jenkins
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>类似如下修改：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>candidates=&quot;
************
************
/usr/local/jdk1.8/bin/java
&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>4、jenkins的默认设置</p></blockquote> <p>Jenkins会随系统启动而启动。详情参照/etc/init.d/jenkins
　　Jenkins会创建一个用户叫做jenkins, <strong>如果你修改了user</strong>，则要修修改所属者：/var/log/jenkins,/var/lib/jenkins,/var/cache/jenkins
　　<strong>如果遇到问题，查看日志</strong> /var/log/jenkins/jenkins.log
　　<strong>配置文件</strong>/etc/sysconfig/jenkins
　　端口默认启用  8080</p> <blockquote><p>5、打开和关闭防火墙</p></blockquote> <p>开启非80端口需要打开防火墙，参考：http://www.cnblogs.com/rslai/p/7954080.html</p> <blockquote><p>6、关于centos上的java</p></blockquote> <p>Jenkins不支持在centos的默认的jdk上工作。如果如下所示，则需要remove：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>　　java -version
　　java version &quot;1.5.0&quot;
　　gij (GNU libgcj) version 4.4.6 20110731 (Red Hat 4.4.6-3)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为了正确使用Jenkins：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>　　yum remove java
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后可以安装openjdk</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>　　yum install java-1.7.0-openjdk
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>正确如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>　　java -version
　　java version &quot;1.7.0_79&quot;
　　OpenJDK Runtime Environment (rhel-2.5.5.1.el6_6-x86_64 u79-b14)
　　OpenJDK 64-Bit Server VM (build 24.79-b02, mixed mode)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>7、配置java路径</p></blockquote> <p>直接启动：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo service jenkins start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但是发现启动失败，于是需要配置java位置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vi /etc/init.d/jenkins
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在启动加入本机的java：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@iZ94xvn71eeZ ~]# vim /etc/init.d/jenkins
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code># Set up environment accordingly to the configuration settings
[ -n &quot;$JENKINS_HOME&quot; ] || { echo &quot;JENKINS_HOME not configured in $JENKINS_CONFIG&quot;;
if [ &quot;$1&quot; = &quot;stop&quot; ]; then exit 0;
else exit 6; fi; }
[ -d &quot;$JENKINS_HOME&quot; ] || { echo &quot;JENKINS_HOME directory does not exist: $JENKINS_HOME&quot;;
if [ &quot;$1&quot; = &quot;stop&quot; ]; then exit 0;
else exit 1; fi; }

# Search usable Java as /usr/bin/java might not point to minimal version required by Jenkins.
# see http://www.nabble.com/guinea-pigs-wanted-----Hudson-RPM-for-RedHat-Linux-td25673707.html
candidates=&quot;
/etc/alternatives/java
/usr/lib/jvm/java-1.8.0/bin/java
/usr/lib/jvm/jre-1.8.0/bin/java
/usr/lib/jvm/java-1.7.0/bin/java
/usr/lib/jvm/jre-1.7.0/bin/java
/usr/bin/java
/usr/java/jdk1.7.0_80/bin/java
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>8、配置端口</p></blockquote> <p>修改</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vi /etc/sysconfig/jenkins　
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>内容改为需要的端口</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>JENKINS_PORT=&quot;8080&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>9、yum安装Jenkins默认路径为</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>/var/lib/jenkins
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="二、进入jenkins"><a href="#二、进入jenkins" aria-hidden="true" class="header-anchor">#</a> 二、进入jenkins</h2> <p>1、打开</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>http://192.168.0.104:8080
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://raw.githubusercontent.com/Cojenkins_item24laStar/static/master/images/jenkins_item24.png" alt="">
2、查看密码，将内容填写到密码处点击继续</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cat /var/lib/jenkins/secrets/initialAdminPassword
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3、选择默认插件即可　　
<img src="https://raw.githubusercontent.com/Cojenkins_item24laStar/static/master/images/jenkins_item25.png" alt=""></p> <p>安装插件随意选择，对后续没有太大影响，因为有需要的插件我们还会在之后安装</p> <p><img src="https://raw.githubusercontent.com/Cojenkins_item24laStar/static/master/images/jenkins_item26.png" alt="">
此处安装需要联网下载，耐心等待安装完</p> <p>4、设置管理员</p> <p><img src="https://raw.githubusercontent.com/Cojenkins_item24laStar/static/master/images/jenkins_item27.png" alt=""></p> <p>创建一个账号，然后下一步
<img src="https://raw.githubusercontent.com/Cojenkins_item24laStar/static/master/images/jenkins_item28.png" alt=""></p> <p>到这里jenkins已经初始化好了</p> <h2 id="jenkins配置（系统管理）"><a href="#jenkins配置（系统管理）" aria-hidden="true" class="header-anchor">#</a> jenkins配置（系统管理）</h2> <p><img src="https://raw.githubusercontent.com/Cojenkins_item24laStar/static/master/images/jenkins_item29.png" alt=""></p> <h3 id="_1-全局安全配置"><a href="#_1-全局安全配置" aria-hidden="true" class="header-anchor">#</a> 1.<strong>全局安全</strong>配置</h3> <p><img src="https://raw.githubusercontent.com/Cojenkins_item24laStar/static/master/images/jenkins_item30.png" alt=""></p> <p>目前是为了学习Jenkins，所有把安全性问题都放开，不做限制</p> <h3 id="_2-插件管理"><a href="#_2-插件管理" aria-hidden="true" class="header-anchor">#</a> 2.插件管理</h3> <p>jenkins系统管理比较重要的就是插件管理了 ，因为jenkins的工作全部是由插件来完成。</p> <p>在插件管理中，有可更新、可选插件、已安装，日常的插件安装都是在这个界面上完成的。比如为了和git协同，我们需要安装git相关的插件。当然安装完插件我们需要重启jenkins</p> <p>当插件安装不上的时候，可以直接去网上下载，进行安装</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>下载地址
http://updates.jenkins-ci.org/
 
解压备份plugin.tar.gz
mv plugins /var/lib/jenkins/
chown -R jenkins.jenkins plugins/
service jenkins restart
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>比如我们需要下载nodejs插件来实现node环境，使用Publish Over SSH插件实现远程自动部署等等。
下面我介绍一下我安装过的几个插件的全过程</p> <h4 id="使用publish-over-ssh插件实现远程自动部署"><a href="#使用publish-over-ssh插件实现远程自动部署" aria-hidden="true" class="header-anchor">#</a> 使用Publish Over SSH插件实现远程自动部署</h4> <p><strong>背景</strong>：现场的部署环境开放外网环境困难，只有一台机器能够开发外网，应对该情况，所有的补丁文件需要直接在master机器上面生成，然后命令移动到其他的服务器上面去。</p> <p>这里使用到了jenkins的Publish Over SSHcha插件。</p> <p><strong>Publish Over SSH插件使用介绍：</strong></p> <p>首先jenkins服务器需要安装Publish Over SSH插件</p> <p>在jenkins页面“系统管理”--&gt;“管理插件”--&gt;&quot;可选插件&quot;中搜索Publish Over SSH插件选择并安装</p> <p><a data-fancybox="" title="" href="http://s5.51cto.com/wyfs02/M01/7E/AF/wKioL1cHXXGDffHKAALinIAmzyc658.png"><img src="http://s5.51cto.com/wyfs02/M01/7E/AF/wKioL1cHXXGDffHKAALinIAmzyc658.png" alt=""></a></p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/Publish_Over_SSH.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/Publish_Over_SSH.png" alt=""></a>
安装完成后，重启下jenkins</p> <p>注：也可以手动下载插件安装，到官网下载插件，然后将下载的插件传到服务器jenkins根目录下的plugins目录</p> <p>即~/.jenkins/plugins目录，重启jenkins即可</p> <p>官网插件下载地址https://wiki.jenkins-ci.org/display/JENKINS/Plugins</p> <p>Publish Over SSH插件安装完成后，在“系统设置”中会出现“Publish Over SSH”的配置标签</p> <p>ssh的配置可使用密钥，也可以使用密码，这里我们使用密钥来配置，在配置之前先配置好jenkins服务器和应用服务器的密钥认证</p> <p>jenkins服务器上生成密钥对，使用ssh-keygen -t rsa命令</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/ssh-keygen.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/ssh-keygen.png" alt=""></a></p> <p>在~/.ssh/下会有私钥id_rsa和公钥id_rsa.pub</p> <p>应用服务器上创建~/.ssh文件夹和~/.ssh/authorized_keys文件，并将jenkins服务器的公钥id_rsa.pub中的内容复制到authorized_keys文件</p> <p>应用服务器上重启ssh服务，service sshd restart</p> <p>现在jenkins服务器可免密码直接登陆应用服务器</p> <p>上面两个前提条件准备完毕之后，现在配置jenkins自动部署</p> <p>在jenkins页面“系统管理”--&gt;&quot;系统设置&quot;中的Publish Over SSH标签配置如下</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/Publish_Over_SSH1.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/Publish_Over_SSH1.png" alt=""></a></p> <p>Passphrase：密码（key的密码，如果你设置了）</p> <p>Path to key：key文件（私钥）的路径</p> <p>SSH Server Name：标识的名字（随便你取什么）</p> <p>Hostname：需要连接ssh的主机名或ip地址，此处填写应用服务器IP（建议ip）</p> <p>Username：用户名</p> <p>Remote Directory：远程目录(根据需要填写文件传到此目录下)</p> <p>“Use password authentication, or use a different key”：使用密码验证(这里使用了密钥认证所以不开启)</p> <p>配置完成后可点击“Test Configuration”测试到目标主机的连接，出现”success“则成功连接
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/Publish_Over_SSH2.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/Publish_Over_SSH2.png" alt=""></a>
如果有多台应用服务器，可以点击”增加“，配置多个“SSH Servers”</p> <p>点击“保存”以保存配置</p> <p>系统配置好ssh连接后，到项目配置中配置构建后发布的步骤</p> <p>点击(项目名“fin_test1”–&gt;左侧菜单的“配置”)来更改项目的配置</p> <p>在配置最后找到“增加构建后操作步骤”，选择&quot;Send build artifacts over SSH&quot;
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/send_file.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/send_file.png" alt=""></a></p> <p>然后在&quot;Send build artifacts over SSH&quot;模块中配置如下</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/send_file_ssh.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/send_file_ssh.png" alt=""></a></p> <p><strong>SSH  Server Name</strong>：选个一个你在系统设置里配置的名字</p> <p><strong>Transfer Set Source files</strong>：需要上传的文件（注意：相对于工作区的路径。看后面的配置可以填写多个，默认用,分隔）注意：如果是多成子目录的需要配置成 target/**/*</p> <p>**Remove prefix：**移除目录（只能指定Transfer Set Source files中的目录，这里移除了target目录表示只将FinServer.war传到目标服务器，否则会在目标服务器创建target目录）</p> <p><strong>Remote directory</strong>：远程目录（根据你的需求填写，这里没有填写默认会继承系统配置，即/mnt）</p> <p><strong>Exec command</strong>：把你要执行的命令写在里面(这里的命令是在目标服务器上执行的)</p> <p><strong>Exclude files</strong>：排除的文件（在你传输目录的时候很有用，使用通配符，例如：<strong>/*.log,</strong>/*.tmp,.git/）</p> <p><strong>Pattern separator</strong>：分隔符（配置Transfer Set Source files的分隔符。如果你这儿更改了，上面的内容也需要更改）</p> <p><strong>No default excludes</strong>：禁止默认的排除规则（具体的自己看帮助）</p> <p><strong>Make empty dirs</strong>：此选项会更改插件的默认行为。默认行为是匹配该文件是否存在，如果存在则创建目录存放。选中此选项会直接创建一个目录存放文件，即使是空目录。（个人理解）</p> <p><strong>Flatten files</strong>：只上传文件，不创建目录（除了远程目录）
<strong>Remote directory is a date format</strong>:远程目录建立带日期的文件夹（需要在Remote directory中配置日期格式），具体格式参考下表：</p> <table><thead><tr><th style="text-align:center;">Remote directory</th> <th style="text-align:center;">Directories created</th></tr></thead> <tbody><tr><td style="text-align:center;">'qa-approved/'yyyyMMddHHmmss</td> <td style="text-align:center;">qa-approved/20101107154555</td></tr> <tr><td style="text-align:center;">'builds/'yyyy/MM/dd/'build-${BUILD_NUMBER}'</td> <td style="text-align:center;">builds/2010/11/07/build-456 (if the build was number 456)</td></tr> <tr><td style="text-align:center;">yyyy_MM/'build'-EEE-d-HHmmss</td> <td style="text-align:center;">2010_11/build-Sun-7-154555</td></tr> <tr><td style="text-align:center;">yyyy-MM-dd_HH-mm-ss</td> <td style="text-align:center;">2010-11-07_15-45-55</td></tr></tbody></table> <p>**Exec timeout (ms)：**运行脚步的超时时间（毫秒）</p> <p><strong>Exec in pty</strong>：模拟一个终端执行脚步</p> <p><strong>Add Transfer Set</strong>
如需要传输多个war包，可点击“Add Transfer Set”，增加一个传输模块</p> <p>如需要上传到多个“SSH Server”，可点击“Add Server”，增加一个服务器模块(系统设置中有多个“SSH Servers”)s
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/send_file_ssh2.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/send_file_ssh2.png" alt=""></a></p> <p>点击”保存“，然后下次构建就会在构建完成后自动部署到应用服务器上</p> <p>至此远程自动部署就可实现</p> <h4 id="nodejs插件"><a href="#nodejs插件" aria-hidden="true" class="header-anchor">#</a> nodejs插件</h4> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/nodejs.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/nodejs.jpg" alt=""></a></p> <p>安装完毕后，选择系统管理-&gt;全局工具配置，配置node下载及安装</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/nodejs2.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/nodejs2.jpg" alt=""></a></p> <h4 id="git钩子"><a href="#git钩子" aria-hidden="true" class="header-anchor">#</a> git钩子</h4> <p>安装的git插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>GIT client plugin
GIT plugin
Git server plugin
GitHub API Plugin
GitHub plugin
SSH Credentials Plugin
SSH plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>为了能够与 GitHub 配合，需要进入对 GitHub 进行一些设置</p> <p>在github中进入博客所在的repo，并点击settings。在设置界面单击左侧的Integrations &amp; services，并选择add service。从下拉菜单中，选中Jenkins(Github plugin)</p> <p>或者直接设置webhooks</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/github1.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/github1.jpg" alt=""></a></p> <p>从下拉菜单中，选中Jenkins (GitHub plugin)。在新打开的界面，填写Jenkins的信息</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/github2.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/github2.jpg" alt=""></a></p> <p>完整的地址为http://xx.xx.xx.xx:8080/GitHub-webhook/。把这里的xx换成实际的IP地址或者域名即可。需要注意的是，网址末尾的斜杠一定不能省略</p> <p>填写好信息以后保存，GitHub就配置好了</p> <h3 id="进入全局工具配置"><a href="#进入全局工具配置" aria-hidden="true" class="header-anchor">#</a> 进入全局工具配置</h3> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/全局配置.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE.png" alt=""></a> <a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/nodejs3.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/nodejs3.jpg" alt=""></a></p> <h3 id="系统配置"><a href="#系统配置" aria-hidden="true" class="header-anchor">#</a> 系统配置</h3> <p>执行者数量：配置并发数量，一般设置为5，不超过10</p> <p>用法：如果是主server，可以不选，如果是从级别必须选择“尽可能的使用这个节点”</p> <p>生成前等待时间：配置该时间10s，避免错误操作，有时间返回
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/系统配置.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE.png" alt=""></a></p> <h3 id="linux系统安装nodejs及其包管理工具"><a href="#linux系统安装nodejs及其包管理工具" aria-hidden="true" class="header-anchor">#</a> Linux系统安装nodejs及其包管理工具</h3> <h3 id="在nodejs官网下载最新包"><a href="#在nodejs官网下载最新包" aria-hidden="true" class="header-anchor">#</a> 在nodejs官网下载最新包</h3> <blockquote><p>官网下载地址:https://nodejs.org/dist/latest/</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>wget https://nodejs.org/dist/latest/node-v11.14.0-linux-x64.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/linux_node.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/linux_node.png" alt=""></a></p> <blockquote><p>解压安装</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>tar zxvf node-v11.14.0-linux-x64.tar.gz 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>进入目录 查看版本：</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>$cd node-v4.5.0-linux-x86  
$cd bin   
$./node -v  
v4.5.0  
$./npm -v   
v2.15.9  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果执行命令的时候报错  <code>/lib/ld-linux.so.2: bad ELF interpreter</code></p> <p>说明你系统软件位数安装错了 如:64位系统中安装了32位程序了</p> <p>解决办法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install glibc.i686
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>重新安装以后还有如下类系错误 再继续安装包</p> <p><code>error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yum install libstdc++.so.6
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>设置全局</p></blockquote> <p>我们刚刚下载的文件bin目录下有node 和 npm ，但是不是全局的，
我们需要把它设置为全局的方便我们使用。
即把node与npm命令 放到/usr/local/bin 下
大部分发行版把这个目录归为PATH  即你在这个目录下放了什么可执行的程序，在系统任何地方都可以直接执行，不需要指定路径。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ln 链接命令-s 软链接
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建一个软链接相当于Windows中的快捷方式</p> <p>所以执行下面命令就相当于把node执行命令创建快捷方式放到/usr/local/bin 目录下，注意第二点，新的ubuntu全局设置在/usr/bin/目录下</p> <p>所以系统的任何地方都可以执行node了</p> <p>sudo 为获得root部分权限：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ sudo ln -s /usr/local/src/node-v4.5.0-linux-x86/bin/node /usr/local/bin/node
$ sudo ln -s /usr/local/src/node-v4.5.0-linux-x86/bin/npm /usr/local/bin/npm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意一下这个是我的目录，你们可以通过pwd查看当前目录，然后改成自己的目录</p> <blockquote><p>安装cnpm或者yarn
建议使用淘宝镜像安装，否则会很慢的</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm config set proxy null
$ npm install -g cnpm --registry=https://registry.npm.taobao.org  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>安装完成后也要创建一个软链接</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ sudo ln -s /usr/local/src/node-v4.5.0-linux-x86/bin/cnpm /usr/local/bin/cnpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>同理安装其他的全局工具也这样设置就好了</p> <h2 id="配置任务"><a href="#配置任务" aria-hidden="true" class="header-anchor">#</a> 配置任务</h2> <blockquote><p>1、安装好github钩子以及nodejs插件后，接下来开始配置任务</p></blockquote> <p>点击创建一个新任务，填写任务名称，构建的项目类型可根据实际情况进行选择，本次选择第一种即可
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jinnkins_item1.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jinnkins_item1.jpg" alt=""></a></p> <blockquote><p>2、配置基础信息
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item2.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item2.jpg" alt=""></a>
3、往下拉，看到源码管理，点选Git，依然填写git仓库对应的Repo地址</p></blockquote> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item3.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item3.jpg" alt=""></a></p> <p><strong>注意：</strong></p> <p>1.如果不勾选 GitHub hook trigger for GITScm polling的话，需要设置一个设置一个Jenkins的webhook地址</p> <p>需要手动配置上图的Credentials即 add-&gt;jenkins设置一个Jenkins的webhook地址
具体步骤：</p> <ul><li><p>1、登录GitHub，进入要本次构建用到的工程；</p></li> <li><p>2、在工程主页面点击右上角的&quot;Settings&quot;，再点击左侧&quot;Webhooks&quot;，然后点击“Add webhook”，如下图：
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item4.jpeg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item4.jpeg" alt=""></a></p></li> <li><p>3.如下图，在&quot;Payload URL&quot;位置填入webhook地址，再点击底部的&quot;Add webhook按钮&quot;，这样就完成webhook配置了，今后当前工程有代码提交，GitHub就会向此webhook地址发请求，通知Jenkins构建：
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item5.jpeg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item5.jpeg" alt=""></a></p></li> <li><p>4.在系统设置页面找到&quot;GitHub&quot;，配置一个&quot;GitHub Server&quot;，如下图，“API URL&quot;填写&quot;https://api.github.com”，“Credentials&quot;位置如下图红框所示，选择&quot;Add-&gt;Jenkins”</p></li></ul> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item6.jpeg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item6.jpeg" alt=""></a></p> <ul><li>5.弹出的页面中，“Kind&quot;选择&quot;Secret text”，&quot;Secret&quot;填入前面在GitHub上生成的Personal access tokens，Description随便写一些描述信息，如下图：</li></ul> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/ienkins_item7.jpeg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/ienkins_item7.jpeg" alt=""></a></p> <ul><li>6.填写完毕后，点击右侧的&quot;Test connection&quot;按钮，如果信息没有填错，显示的内容如下图所示：
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item8.jpeg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item8.jpeg" alt=""></a></li> <li>7.点击页面最底部的&quot;保存&quot;按钮；</li> <li>构建item的时候可以直接
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item9.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item9.jpg" alt=""></a></li></ul> <blockquote><p>4、继续往下拉，在构建触发器单击增加构建步骤，在弹出的下拉菜单中选择Execute shell。勾选GitHub hook trigger for GITScm polling。构建环境选择nodejs
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkinns_item10.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkinns_item10.jpg" alt=""></a>
以上俩张图红框设置解释</p></blockquote> <p>选择&quot;Git&quot;；</p> <p>&quot;Repository URL&quot;输入仓库地址：https://github.com/zq2599/jenkinsdemo.git；</p> <p>“Credentials&quot;创建一个Credentials，Kind选择&quot;Username with password”，Username输入GitHub账号，Password输入GitHub密码；</p> <p>“源码库浏览器&quot;选择&quot;githubweb”；</p> <p>&quot;URL&quot;输入项目主页：https://github.com/zq2599/jenkinsdemo；</p> <p>“构建触发器&quot;中勾选&quot;GitHub hook trigger for GiTScm polling”；</p> <blockquote><p>构建环境设置</p></blockquote> <ul><li>1.use secret text(s) or file(s)
生成Personal access tokens</li></ul> <p>Jenkins访问GitHub工程的时候，有的操作是需要授权的，所以我们要在GitHub上生成授权的token给Jenkins使用，这就是Personal access tokens，生成步骤如下：</p> <p>1.登录GitHub，进入&quot;Settings&quot;页面，点击左下角的&quot;Developer settings&quot;，如下图：
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item12.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item12.png" alt=""></a>
2.跳转到&quot;Developer settings&quot;页面后，点击左下角的“Personal access tokens”，如下图：
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item13.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item13.png" alt=""></a>
3.跳转到&quot;Personal access tokens&quot;页面后，点击右上角的&quot;Generate new token&quot;按钮，如下图：
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item14.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item14.png" alt=""></a>
4.可能会提示输入GitHub密码，输入后跳转到创建token的页面，如下图所示，输入title，再勾选&quot;repo&quot;和&quot;admin:repo_hook&quot;，再点击底部的&quot;Generate token&quot;按钮，就能产生一个新的access token，将此字符串复制下来，后面jenkins任务中会用到：
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item15.png"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item15.png" alt=""></a>
如下图所示，勾选&quot;Use secret text(s) or file(s)&quot;，下面的&quot;Credentials&quot;选择我们之前配置过的&quot;Personal access tokens&quot;</p> <p>勾选的这个主要是用来鉴权的
<a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item11.jpeg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item11.jpeg" alt=""></a></p> <ul><li>2.provide Node &amp; npm bin/folder to PATH</li></ul> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item16.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item16.jpg" alt=""></a></p> <blockquote><p>build
构建的一些命令比如</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install &amp;&amp;
npm run build
cp -r ./dist /home/xiaohuochai/blog/admin
sudo chown -R jenkins:jenkins /home/xiaohuochai/blog/admin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>post steps
构建后置步骤</p></blockquote> <p>比如：</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item21.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item21.jpg" alt=""></a>
脚本如下</p> <p>stop.sh</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
echo &quot;Stopping xxx&quot;
pid=`ps -ef|grep xxx-0.0.1-SNAPSHOT.jar|grep -v grep|awk '{print $2}'`
if [ -n &quot;$pid&quot; ]
then
   echo &quot;kill -9 的pid:&quot; $pid
   kill -9 $pid
fi
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>replace.sh</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cp /root/.jenkins/workspace/jenkinsdemo/target/jenkinsdemo-0.0.1-SNAPSHOT.jar /home/deploy-mq/

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在构建后，就会执行脚本，自动运行打包好的项目啦</p> <blockquote><p>邮件提醒</p></blockquote> <p>在系统设置中找到Jenkins Locaction项填入Jenkins URL和系统管理员邮件地址，系统管理员邮件地址一定要配置，否则发不了邮件通知。因为邮件通知都是由系统管理员的邮箱发出来的</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item17.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item17.jpg" alt=""></a></p> <p>找到Extended E-mail Notification项，填入类似信息</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item18.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item18.jpg" alt=""></a></p> <p>进行新建的pull-blog项目中，在构建后操作新增Editable Email Notification</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item19.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item19.jpg" alt=""></a></p> <p>在advances setting中选择always，意思是无论什么情况任务执行完就发邮件</p> <p><a data-fancybox="" title="" href="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item20.jpg"><img src="https://raw.githubusercontent.com/ColaStar/static/master/images/jenkins_item20.jpg" alt=""></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/11/2019, 1:38:34 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blogs/views/no.3/gulp.html" class="prev">
          gulp简介
        </a></span> <span class="next"><a href="/blogs/views/no.3/linux_sed_awk.html">
          centos7之sed和awk常用
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blogs/views/assets/js/app.3da757de.js" defer></script><script src="/blogs/views/assets/js/2.d340cefd.js" defer></script><script src="/blogs/views/assets/js/56.740f904a.js" defer></script>
  </body>
</html>
