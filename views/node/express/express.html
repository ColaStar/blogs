<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Express 框架 | 个人博客</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="https://colastar.github.io/blogs/views/images/favicon.ico">
    <link rel="manifest" href="https://colastar.github.io/blogs/views/js/manifest.json">
    <link rel="apple-touch-icon" href="https://colastar.github.io/blogs/views/images/logo.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script src="/blogs/js/tj.js"></script>
    <script src="/blogs/js/code.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="谁家今夜扁舟子，何处相思明月楼？">
    
    <link rel="preload" href="/blogs/assets/css/0.styles.f7c6bd56.css" as="style"><link rel="preload" href="/blogs/assets/js/app.2c386edb.js" as="script"><link rel="preload" href="/blogs/assets/js/2.5689dfa7.js" as="script"><link rel="preload" href="/blogs/assets/js/130.cd867116.js" as="script"><link rel="prefetch" href="/blogs/assets/js/10.67ef92fa.js"><link rel="prefetch" href="/blogs/assets/js/100.e7bb2c29.js"><link rel="prefetch" href="/blogs/assets/js/101.3fd8ab77.js"><link rel="prefetch" href="/blogs/assets/js/102.dce589fd.js"><link rel="prefetch" href="/blogs/assets/js/103.38e0e707.js"><link rel="prefetch" href="/blogs/assets/js/104.b8292c9c.js"><link rel="prefetch" href="/blogs/assets/js/105.b83a591a.js"><link rel="prefetch" href="/blogs/assets/js/106.d17944c0.js"><link rel="prefetch" href="/blogs/assets/js/107.683f50fc.js"><link rel="prefetch" href="/blogs/assets/js/108.160ab72f.js"><link rel="prefetch" href="/blogs/assets/js/109.b8e8d54e.js"><link rel="prefetch" href="/blogs/assets/js/11.a6ce9264.js"><link rel="prefetch" href="/blogs/assets/js/110.4f7b76fe.js"><link rel="prefetch" href="/blogs/assets/js/111.a19597f3.js"><link rel="prefetch" href="/blogs/assets/js/112.1ff8371c.js"><link rel="prefetch" href="/blogs/assets/js/113.f1df1989.js"><link rel="prefetch" href="/blogs/assets/js/114.7f261380.js"><link rel="prefetch" href="/blogs/assets/js/115.d82fc996.js"><link rel="prefetch" href="/blogs/assets/js/116.4a799db8.js"><link rel="prefetch" href="/blogs/assets/js/117.54f8027f.js"><link rel="prefetch" href="/blogs/assets/js/118.c6702d40.js"><link rel="prefetch" href="/blogs/assets/js/119.ed018e76.js"><link rel="prefetch" href="/blogs/assets/js/12.aa25492e.js"><link rel="prefetch" href="/blogs/assets/js/120.0c079233.js"><link rel="prefetch" href="/blogs/assets/js/121.d0a32144.js"><link rel="prefetch" href="/blogs/assets/js/122.48cce30c.js"><link rel="prefetch" href="/blogs/assets/js/123.d12779f8.js"><link rel="prefetch" href="/blogs/assets/js/124.0d9aa63d.js"><link rel="prefetch" href="/blogs/assets/js/125.99ce4386.js"><link rel="prefetch" href="/blogs/assets/js/126.c026a7a5.js"><link rel="prefetch" href="/blogs/assets/js/127.78d667cb.js"><link rel="prefetch" href="/blogs/assets/js/128.d2bbebe9.js"><link rel="prefetch" href="/blogs/assets/js/129.f0836b9a.js"><link rel="prefetch" href="/blogs/assets/js/13.db656524.js"><link rel="prefetch" href="/blogs/assets/js/131.364d1da9.js"><link rel="prefetch" href="/blogs/assets/js/132.872aa82e.js"><link rel="prefetch" href="/blogs/assets/js/133.dfed9819.js"><link rel="prefetch" href="/blogs/assets/js/134.f29616ee.js"><link rel="prefetch" href="/blogs/assets/js/135.5f4f1640.js"><link rel="prefetch" href="/blogs/assets/js/136.fc728afa.js"><link rel="prefetch" href="/blogs/assets/js/137.76854a89.js"><link rel="prefetch" href="/blogs/assets/js/138.c6ace0f4.js"><link rel="prefetch" href="/blogs/assets/js/139.df6bf604.js"><link rel="prefetch" href="/blogs/assets/js/14.71f171a2.js"><link rel="prefetch" href="/blogs/assets/js/140.9c51c0f0.js"><link rel="prefetch" href="/blogs/assets/js/141.3549d7d3.js"><link rel="prefetch" href="/blogs/assets/js/142.20b23811.js"><link rel="prefetch" href="/blogs/assets/js/143.3d0af754.js"><link rel="prefetch" href="/blogs/assets/js/144.ff914a4d.js"><link rel="prefetch" href="/blogs/assets/js/145.ab8c735d.js"><link rel="prefetch" href="/blogs/assets/js/146.3c8ded36.js"><link rel="prefetch" href="/blogs/assets/js/147.31a1eacd.js"><link rel="prefetch" href="/blogs/assets/js/148.dfdd31be.js"><link rel="prefetch" href="/blogs/assets/js/149.69cb0b62.js"><link rel="prefetch" href="/blogs/assets/js/15.f2d94a5d.js"><link rel="prefetch" href="/blogs/assets/js/150.b288e9fc.js"><link rel="prefetch" href="/blogs/assets/js/151.5b74fbc7.js"><link rel="prefetch" href="/blogs/assets/js/152.401b8343.js"><link rel="prefetch" href="/blogs/assets/js/153.a5850933.js"><link rel="prefetch" href="/blogs/assets/js/154.63be3142.js"><link rel="prefetch" href="/blogs/assets/js/155.afd04317.js"><link rel="prefetch" href="/blogs/assets/js/156.fe51f9f3.js"><link rel="prefetch" href="/blogs/assets/js/157.92c8e0ac.js"><link rel="prefetch" href="/blogs/assets/js/158.f04fff58.js"><link rel="prefetch" href="/blogs/assets/js/159.f4dd1c88.js"><link rel="prefetch" href="/blogs/assets/js/16.e58cd11a.js"><link rel="prefetch" href="/blogs/assets/js/160.f13b2646.js"><link rel="prefetch" href="/blogs/assets/js/161.750f237d.js"><link rel="prefetch" href="/blogs/assets/js/162.7b0422cb.js"><link rel="prefetch" href="/blogs/assets/js/163.705a776d.js"><link rel="prefetch" href="/blogs/assets/js/164.0d7e8eb8.js"><link rel="prefetch" href="/blogs/assets/js/165.0dc063a3.js"><link rel="prefetch" href="/blogs/assets/js/166.41658f6f.js"><link rel="prefetch" href="/blogs/assets/js/167.d360d750.js"><link rel="prefetch" href="/blogs/assets/js/168.265d342a.js"><link rel="prefetch" href="/blogs/assets/js/169.b35e48f7.js"><link rel="prefetch" href="/blogs/assets/js/17.ffb6b1c0.js"><link rel="prefetch" href="/blogs/assets/js/170.0730b1fe.js"><link rel="prefetch" href="/blogs/assets/js/171.5c998818.js"><link rel="prefetch" href="/blogs/assets/js/172.141ad9a6.js"><link rel="prefetch" href="/blogs/assets/js/173.0045183e.js"><link rel="prefetch" href="/blogs/assets/js/174.12047e97.js"><link rel="prefetch" href="/blogs/assets/js/175.d65cbeee.js"><link rel="prefetch" href="/blogs/assets/js/176.908882cc.js"><link rel="prefetch" href="/blogs/assets/js/18.cd32f3af.js"><link rel="prefetch" href="/blogs/assets/js/19.11b2b448.js"><link rel="prefetch" href="/blogs/assets/js/20.08819ef3.js"><link rel="prefetch" href="/blogs/assets/js/21.698a52c5.js"><link rel="prefetch" href="/blogs/assets/js/22.d7210ff8.js"><link rel="prefetch" href="/blogs/assets/js/23.d56d0f74.js"><link rel="prefetch" href="/blogs/assets/js/24.438b7e8f.js"><link rel="prefetch" href="/blogs/assets/js/25.9692637a.js"><link rel="prefetch" href="/blogs/assets/js/26.ee8d2e2c.js"><link rel="prefetch" href="/blogs/assets/js/27.fac2bd55.js"><link rel="prefetch" href="/blogs/assets/js/28.b19cba14.js"><link rel="prefetch" href="/blogs/assets/js/29.32667801.js"><link rel="prefetch" href="/blogs/assets/js/3.3923979e.js"><link rel="prefetch" href="/blogs/assets/js/30.b62b51b4.js"><link rel="prefetch" href="/blogs/assets/js/31.d4edff23.js"><link rel="prefetch" href="/blogs/assets/js/32.38a6e248.js"><link rel="prefetch" href="/blogs/assets/js/33.dc400d0c.js"><link rel="prefetch" href="/blogs/assets/js/34.9760f2ed.js"><link rel="prefetch" href="/blogs/assets/js/35.0c8c5faf.js"><link rel="prefetch" href="/blogs/assets/js/36.243f5b3d.js"><link rel="prefetch" href="/blogs/assets/js/37.8150190e.js"><link rel="prefetch" href="/blogs/assets/js/38.c34cb629.js"><link rel="prefetch" href="/blogs/assets/js/39.1de86319.js"><link rel="prefetch" href="/blogs/assets/js/4.f2bc8a01.js"><link rel="prefetch" href="/blogs/assets/js/40.603e7954.js"><link rel="prefetch" href="/blogs/assets/js/41.f60a79f1.js"><link rel="prefetch" href="/blogs/assets/js/42.93e1d425.js"><link rel="prefetch" href="/blogs/assets/js/43.c685d861.js"><link rel="prefetch" href="/blogs/assets/js/44.65bbdfe1.js"><link rel="prefetch" href="/blogs/assets/js/45.3dd35806.js"><link rel="prefetch" href="/blogs/assets/js/46.77df4050.js"><link rel="prefetch" href="/blogs/assets/js/47.68d02274.js"><link rel="prefetch" href="/blogs/assets/js/48.a3fbeb06.js"><link rel="prefetch" href="/blogs/assets/js/49.c7f31446.js"><link rel="prefetch" href="/blogs/assets/js/5.aee30350.js"><link rel="prefetch" href="/blogs/assets/js/50.f12a3804.js"><link rel="prefetch" href="/blogs/assets/js/51.714a06a5.js"><link rel="prefetch" href="/blogs/assets/js/52.e6a26247.js"><link rel="prefetch" href="/blogs/assets/js/53.5cfd44af.js"><link rel="prefetch" href="/blogs/assets/js/54.e12cd939.js"><link rel="prefetch" href="/blogs/assets/js/55.28ad078a.js"><link rel="prefetch" href="/blogs/assets/js/56.63d98a6c.js"><link rel="prefetch" href="/blogs/assets/js/57.3f203274.js"><link rel="prefetch" href="/blogs/assets/js/58.5833cbcd.js"><link rel="prefetch" href="/blogs/assets/js/59.5723bb58.js"><link rel="prefetch" href="/blogs/assets/js/6.1c408966.js"><link rel="prefetch" href="/blogs/assets/js/60.eb203b87.js"><link rel="prefetch" href="/blogs/assets/js/61.af237897.js"><link rel="prefetch" href="/blogs/assets/js/62.bd07db26.js"><link rel="prefetch" href="/blogs/assets/js/63.b1adffc7.js"><link rel="prefetch" href="/blogs/assets/js/64.ae94a8ba.js"><link rel="prefetch" href="/blogs/assets/js/65.f25f4e5b.js"><link rel="prefetch" href="/blogs/assets/js/66.6f95de97.js"><link rel="prefetch" href="/blogs/assets/js/67.8bbbba9e.js"><link rel="prefetch" href="/blogs/assets/js/68.fe674d7d.js"><link rel="prefetch" href="/blogs/assets/js/69.5570d877.js"><link rel="prefetch" href="/blogs/assets/js/7.7f10b082.js"><link rel="prefetch" href="/blogs/assets/js/70.3fb38206.js"><link rel="prefetch" href="/blogs/assets/js/71.16e4cf31.js"><link rel="prefetch" href="/blogs/assets/js/72.9ac2172c.js"><link rel="prefetch" href="/blogs/assets/js/73.fa9c2417.js"><link rel="prefetch" href="/blogs/assets/js/74.78cefa04.js"><link rel="prefetch" href="/blogs/assets/js/75.b99763f3.js"><link rel="prefetch" href="/blogs/assets/js/76.725dc8aa.js"><link rel="prefetch" href="/blogs/assets/js/77.cb426184.js"><link rel="prefetch" href="/blogs/assets/js/78.85dfa033.js"><link rel="prefetch" href="/blogs/assets/js/79.1a6ad38e.js"><link rel="prefetch" href="/blogs/assets/js/8.e9f537d2.js"><link rel="prefetch" href="/blogs/assets/js/80.ca41e5ad.js"><link rel="prefetch" href="/blogs/assets/js/81.a88e77b9.js"><link rel="prefetch" href="/blogs/assets/js/82.f9625b81.js"><link rel="prefetch" href="/blogs/assets/js/83.d8893aa8.js"><link rel="prefetch" href="/blogs/assets/js/84.803c7e03.js"><link rel="prefetch" href="/blogs/assets/js/85.f32d172f.js"><link rel="prefetch" href="/blogs/assets/js/86.9e2fbb4e.js"><link rel="prefetch" href="/blogs/assets/js/87.5ce800bc.js"><link rel="prefetch" href="/blogs/assets/js/88.5d30849e.js"><link rel="prefetch" href="/blogs/assets/js/89.11608fe8.js"><link rel="prefetch" href="/blogs/assets/js/9.dc999507.js"><link rel="prefetch" href="/blogs/assets/js/90.525511f2.js"><link rel="prefetch" href="/blogs/assets/js/91.26c42499.js"><link rel="prefetch" href="/blogs/assets/js/92.170e8b3c.js"><link rel="prefetch" href="/blogs/assets/js/93.d6cca8b8.js"><link rel="prefetch" href="/blogs/assets/js/94.6773f1b5.js"><link rel="prefetch" href="/blogs/assets/js/95.9fc8a722.js"><link rel="prefetch" href="/blogs/assets/js/96.8e4818e9.js"><link rel="prefetch" href="/blogs/assets/js/97.bd5efa90.js"><link rel="prefetch" href="/blogs/assets/js/98.4e749d26.js"><link rel="prefetch" href="/blogs/assets/js/99.c9313f17.js">
    <link rel="stylesheet" href="/blogs/assets/css/0.styles.f7c6bd56.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/" class="home-link router-link-active"><!----> <span class="site-name">个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blogs/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/no.0/js/es6.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/blogs/javascript-QA/javascriptqa.html" class="nav-link">
  javaScript与测试工程师
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.1/函数式编程/函数式编程.html" class="nav-link">
  编程相关
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.2/http.html" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.3/webpack.html" class="nav-link">
  前端自动化
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.4/前端性能优化.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.5/css工作流.html" class="nav-link">
  css相关
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.6/react/react.html" class="nav-link">
  框架相关
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.7/计算机组成原理.html" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.8/数据结构与算法.html" class="nav-link">
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/blogs/node/node/node.html" class="nav-link">
  node相关
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.10/网络安全.html" class="nav-link">
  网络安全
</a></li><li class="dropdown-item"><!----> <a href="/blogs/other/git/git命令全集.html" class="nav-link">
  其他相关
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/other/手写各种/手写代码实现.html" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="https://github.com/ColaStar/blogs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blogs/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/no.0/js/es6.html" class="nav-link">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/blogs/javascript-QA/javascriptqa.html" class="nav-link">
  javaScript与测试工程师
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.1/函数式编程/函数式编程.html" class="nav-link">
  编程相关
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.2/http.html" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.3/webpack.html" class="nav-link">
  前端自动化
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.4/前端性能优化.html" class="nav-link">
  前端优化
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.5/css工作流.html" class="nav-link">
  css相关
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.6/react/react.html" class="nav-link">
  框架相关
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.7/计算机组成原理.html" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.8/数据结构与算法.html" class="nav-link">
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/blogs/node/node/node.html" class="nav-link">
  node相关
</a></li><li class="dropdown-item"><!----> <a href="/blogs/no.10/网络安全.html" class="nav-link">
  网络安全
</a></li><li class="dropdown-item"><!----> <a href="/blogs/other/git/git命令全集.html" class="nav-link">
  其他相关
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/other/手写各种/手写代码实现.html" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="https://github.com/ColaStar/blogs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blogs/node/Node.js数据存储方式的选择.html" class="sidebar-link">Node.js 数据存储方式的选择</a></li><li><a href="/blogs/node/express/express.html" aria-current="page" class="active sidebar-link">Express 框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#express简介" class="sidebar-link">express简介</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#安装-express" class="sidebar-link">安装 Express</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#请求和响应" class="sidebar-link">请求和响应</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#静态文件" class="sidebar-link">静态文件</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#get-方法" class="sidebar-link">GET 方法</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#post-方法" class="sidebar-link">POST 方法</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#文件上传" class="sidebar-link">文件上传</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#cookie-管理" class="sidebar-link">Cookie 管理</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#express脚手架" class="sidebar-link">express脚手架</a></li><li class="sidebar-sub-header"><a href="/blogs/node/express/express.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/blogs/node/express/middleware.html" class="sidebar-link">express中间件</a></li><li><a href="/blogs/node/koa/koa-generator.html" class="sidebar-link">KOA2脚手架</a></li><li><a href="/blogs/node/koa/koa.html" class="sidebar-link">koa学习记录</a></li><li><a href="/blogs/node/koa/koa_router.html" class="sidebar-link">路由 koa-router</a></li><li><a href="/blogs/node/node/fs.html" class="sidebar-link">Node.js 文件系统</a></li><li><a href="/blogs/node/node/node.html" class="sidebar-link">node.js</a></li><li><a href="/blogs/node/node/nodemon.html" class="sidebar-link">nodemon 基本配置与使用</a></li><li><a href="/blogs/node/npm/npm-scripts.html" class="sidebar-link">npm 脚本</a></li><li><a href="/blogs/node/npm/npx.html" class="sidebar-link">npx使用介绍</a></li><li><a href="/blogs/node/npm/nrm/nrm.html" class="sidebar-link">nrm源管理工具</a></li><li><a href="/blogs/node/前后端分离与用户验证.html" class="sidebar-link">前后端分离与用户验证</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="express-框架"><a href="#express-框架" class="header-anchor">#</a> Express 框架</h1> <ul><li>express简介</li> <li>安装express</li> <li>请求与响应</li> <li>路由</li> <li>处理静态文件</li> <li>文件上传</li> <li>GET与POST</li> <li>Cookie 管理</li></ul> <h2 id="express简介"><a href="#express简介" class="header-anchor">#</a> express简介</h2> <p>Express 是一个简洁而灵活的 node.js Web应用框架, 提供了一系列强大特性帮助你创建各种 Web 应用，和丰富的 HTTP 工具。</p> <p>使用 Express 可以快速地搭建一个完整功能的网站。</p> <p>Express 框架核心特性：</p> <ul><li><p>可以设置中间件来响应 HTTP 请求。</p></li> <li><p>定义了路由表用于执行不同的 HTTP 请求动作。</p></li> <li><p>可以通过向模板传递参数来动态渲染 HTML 页面。</p></li></ul> <h2 id="安装-express"><a href="#安装-express" class="header-anchor">#</a> 安装 Express</h2> <p>安装 Express 并将其保存到依赖列表中：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ cnpm install express --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>以上命令会将 Express 框架安装在当前目录的 <code>node_modules</code> 目录中， <code>node_modules</code>目录下会自动创建 express 目录。以下几个重要的模块是需要与 express 框架一起安装的：</p> <ul><li><p>body-parser - node.js 中间件，用于处理 JSON, Raw, Text 和 URL 编码的数据。</p></li> <li><p>cookie-parser - 这就是一个解析Cookie的工具。通过req.cookies可以取到传过来的cookie，并把它们转成对象。</p></li> <li><p>multer - node.js 中间件，用于处理 enctype=&quot;multipart/form-data&quot;（设置表单的MIME编码）的表单数据。</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ cnpm install body-parser --save
$ cnpm install cookie-parser --save
$ cnpm install multer --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>安装完后，我们可以查看下 express 使用的版本号：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ cnpm list express
/data/www/node
└── express@4.15.2  -&gt; /Users/tianqixin/www/node/node_modules/.4.15.2@express
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>第一个 Express 框架实例
接下来我们使用 Express 框架来输出 &quot;Hello World&quot;。</p></blockquote> <p>以下实例中我们引入了 express 模块，并在客户端发起请求后，响应 &quot;Hello World&quot; 字符串。</p> <p>创建 express_demo.js 文件，代码如下所示：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//express_demo.js 文件
var express = require('express');
var app = express();
 
app.get('/', function (req, res) {
   res.send('Hello World');
})
 
var server = app.listen(8081, function () {
 
  var host = server.address().address
  var port = server.address().port
 
  console.log(&quot;应用实例，访问地址为 http://%s:%s&quot;, host, port)
 
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>执行以上代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ node express_demo.js 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>应用实例，访问地址为 http://0.0.0.0:8081
在浏览器中访问 http://127.0.0.1:8081，结果如下图所示：</p> <h2 id="请求和响应"><a href="#请求和响应" class="header-anchor">#</a> 请求和响应</h2> <p><code>Express</code> 应用使用回调函数的参数： <code>request</code> 和 <code>response</code> 对象来处理请求和响应的数据。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.get('/', function (req, res) {
   // --
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>request</code> 和 <code>response</code> 对象的具体介绍：</p> <blockquote><p><code>Request</code> 对象 - <code>request</code> 对象表示 <code>HTTP</code> 请求，<strong>包含了请求查询字符串，参数，内容，HTTP 头部等属性</strong>。常见属性有：</p></blockquote> <ul><li>req.app：当callback为外部文件时，用req.app访问express的实例</li> <li>req.baseUrl：获取路由当前安装的URL路径</li> <li>req.body / req.cookies：获得「请求主体」/ Cookies</li> <li>req.fresh / req.stale：判断请求是否还「新鲜」</li> <li>req.hostname / req.ip：获取主机名和IP地址</li> <li>req.originalUrl：获取原始请求URL</li> <li>req.params：获取路由的parameters</li> <li>req.path：获取请求路径</li> <li>req.protocol：获取协议类型</li> <li>req.query：获取URL的查询参数串</li> <li>req.route：获取当前匹配的路由</li> <li>req.subdomains：获取子域名</li> <li>req.accepts()：检查可接受的请求的文档类型</li> <li>req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguages：返回指定字符集的第一个可接受字符编码</li> <li>req.get()：获取指定的HTTP请求头</li> <li>req.is()：判断请求头Content-Type的MIME类型</li></ul> <blockquote><p><code>Response</code> 对象 - <code>response</code> 对象表示 <code>HTTP</code> 响应，即在<strong>接收到请求时向客户端发送的</strong>
HTTP 响应数据。常见属性有：</p></blockquote> <ul><li>res.app：同req.app一样</li> <li>res.append()：追加指定HTTP头</li> <li>res.set()在res.append()后将重置之前设置的头</li> <li>res.cookie(name，value [，option])：设置Cookie
opition: domain / expires / httpOnly / maxAge / path / secure / signed</li> <li>res.clearCookie()：清除Cookie</li> <li>res.download()：传送指定路径的文件</li> <li>res.get()：返回指定的HTTP头</li> <li>res.json()：传送JSON响应</li> <li>res.jsonp()：传送JSONP响应</li> <li>res.location()：只设置响应的Location HTTP头，不设置状态码或者close response</li> <li>res.redirect()：设置响应的Location HTTP头，并且设置状态码302</li> <li>res.render(view,[locals],callback)：渲染一个view，同时向callback传递渲染后的字符串，如果在渲染过程中有错误发生next(err)将会被自动调用。callback将会被传入一个可能发生的错误以及渲染后的页面，这样就不会自动输出了。</li> <li>res.send()：传送HTTP响应</li> <li>res.sendFile(path [，options] [，fn])：传送指定路径的文件 -会自动根据文件extension设定Content-Type</li> <li>res.set()：设置HTTP头，传入object可以一次设置多个头</li> <li>res.status()：设置HTTP状态码</li> <li>res.type()：设置Content-Type的MIME类型</li></ul> <hr> <h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <p>我们已经了解了 HTTP 请求的基本应用，而路由决定了由谁(指定脚本)去响应客户端请求。</p> <p>在HTTP请求中，我们可以通过路由提取出请求的URL以及GET/POST参数。</p> <p>接下来我们扩展 Hello World，添加一些功能来处理更多类型的 HTTP 请求。</p> <p>创建 express_demo2.js 文件，代码如下所示：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>express_demo2.js 文件代码：
var express = require('express');
var app = express();
 
//  主页输出 &quot;Hello World&quot;
app.get('/', function (req, res) {
   console.log(&quot;主页 GET 请求&quot;);
   res.send('Hello GET');
})
 
 
//  POST 请求
app.post('/', function (req, res) {
   console.log(&quot;主页 POST 请求&quot;);
   res.send('Hello POST');
})
 
//  /del_user 页面响应
app.get('/del_user', function (req, res) {
   console.log(&quot;/del_user 响应 DELETE 请求&quot;);
   res.send('删除页面');
})
 
//  /list_user 页面 GET 请求
app.get('/list_user', function (req, res) {
   console.log(&quot;/list_user GET 请求&quot;);
   res.send('用户列表页面');
})
 
// 对页面 abcd, abxcd, ab123cd, 等响应 GET 请求
app.get('/ab*cd', function(req, res) {   
   console.log(&quot;/ab*cd GET 请求&quot;);
   res.send('正则匹配');
})
 
 
var server = app.listen(8081, function () {
 
  var host = server.address().address
  var port = server.address().port
 
  console.log(&quot;应用实例，访问地址为 http://%s:%s&quot;, host, port)
 
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>执行以上代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ node express_demo2.js 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>应用实例，访问地址为 http://0.0.0.0:8081
接下来你可以尝试访问 http://127.0.0.1:8081 不同的地址，查看效果。</p> <p>在浏览器中访问 http://127.0.0.1:8081/list_user，结果如下图所示：</p> <p><a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/express2.jpg"><img src="https://www.runoob.com/wp-content/uploads/2015/09/express2.jpg" alt=""></a></p> <p>在浏览器中访问 http://127.0.0.1:8081/abcd，结果如下图所示：</p> <p><a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/express1.jpg"><img src="https://www.runoob.com/wp-content/uploads/2015/09/express1.jpg" alt=""></a>
在浏览器中访问 http://127.0.0.1:8081/abcdefg，结果如下图所示：
<a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/express3.jpg"><img src="https://www.runoob.com/wp-content/uploads/2015/09/express3.jpg" alt=""></a></p> <h2 id="静态文件"><a href="#静态文件" class="header-anchor">#</a> 静态文件</h2> <p>Express 提供了内置的中间件 <code>express.static</code> 来设置静态文件如：图片， CSS, JavaScript 等。</p> <p>你可以使用 express.static 中间件来设置静态文件路径。例如，如果你将图片， CSS, JavaScript 文件放在 public 目录下，你可以这么写：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.use('/public', express.static('public'));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们可以到 public/images 目录下放些图片,如下所示：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>node_modules
server.js
public/
public/images
public/images/logo.png
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>让我们再修改下 &quot;Hello World&quot; 应用添加处理静态文件的功能。</p> <p>创建 express_demo3.js 文件，代码如下所示：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>express_demo3.js 文件代码：
var express = require('express');
var app = express();
 
app.use('/public', express.static('public'));
 
app.get('/', function (req, res) {
   res.send('Hello World');
})
 
var server = app.listen(8081, function () {
 
  var host = server.address().address
  var port = server.address().port
 
  console.log(&quot;应用实例，访问地址为 http://%s:%s&quot;, host, port)
 
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>执行以上代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ node express_demo3.js 
应用实例，访问地址为 http://0.0.0.0:8081
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行以上代码：</p> <p>在浏览器中访问 http://127.0.0.1:8081/public/images/logo.png</p> <h2 id="get-方法"><a href="#get-方法" class="header-anchor">#</a> GET 方法</h2> <p>以下实例演示了在表单中通过 GET 方法提交两个参数，我们可以使用 server.js 文件内的 process_get 路由器来处理输入：</p> <p>index.htm 文件代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;html&gt;
&lt;body&gt;
&lt;form action=&quot;http://127.0.0.1:8081/process_get&quot; method=&quot;GET&quot;&gt;
First Name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot;&gt;  &lt;br&gt;
 
Last Name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot;&gt;
&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>server.js 文件代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var express = require('express');
var app = express();
 
app.use('/public', express.static('public'));
 
app.get('/index.htm', function (req, res) {
   res.sendFile( __dirname + &quot;/&quot; + &quot;index.htm&quot; );
})
 
app.get('/process_get', function (req, res) {
 
   // 输出 JSON 格式
   var response = {
       &quot;first_name&quot;:req.query.first_name,
       &quot;last_name&quot;:req.query.last_name
   };
   console.log(response);
   res.end(JSON.stringify(response));
})
 
var server = app.listen(8081, function () {
 
  var host = server.address().address
  var port = server.address().port
 
  console.log(&quot;应用实例，访问地址为 http://%s:%s&quot;, host, port)
 
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>执行以上代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>node server.js 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>应用实例，访问地址为 http://0.0.0.0:8081
浏览器访问 http://127.0.0.1:8081/index.htm，如图所示：</p> <p><a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/express5.jpg"><img src="https://www.runoob.com/wp-content/uploads/2015/09/express5.jpg" alt=""></a>
现在你可以向表单输入数据，并提交，如下演示：
<a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/nodejs-gif6.gif"><img src="https://www.runoob.com/wp-content/uploads/2015/09/nodejs-gif6.gif" alt=""></a></p> <h2 id="post-方法"><a href="#post-方法" class="header-anchor">#</a> POST 方法</h2> <p>以下实例演示了在表单中通过 POST 方法提交两个参数，我们可以使用 server.js 文件内的 process_post 路由器来处理输入：</p> <p>index.htm 文件代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;html&gt;
&lt;body&gt;
&lt;form action=&quot;http://127.0.0.1:8081/process_post&quot; method=&quot;POST&quot;&gt;
First Name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot;&gt;  &lt;br&gt;
 
Last Name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot;&gt;
&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>server.js 文件代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var express = require('express');
var app = express();
var bodyParser = require('body-parser');
 
// 创建 application/x-www-form-urlencoded 编码解析
var urlencodedParser = bodyParser.urlencoded({ extended: false })
 
app.use('/public', express.static('public'));
 
app.get('/index.htm', function (req, res) {
   res.sendFile( __dirname + &quot;/&quot; + &quot;index.htm&quot; );
})
 
app.post('/process_post', urlencodedParser, function (req, res) {
 
   // 输出 JSON 格式
   var response = {
       &quot;first_name&quot;:req.body.first_name,
       &quot;last_name&quot;:req.body.last_name
   };
   console.log(response);
   res.end(JSON.stringify(response));
})
 
var server = app.listen(8081, function () {
 
  var host = server.address().address
  var port = server.address().port
 
  console.log(&quot;应用实例，访问地址为 http://%s:%s&quot;, host, port)
 
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>执行以上代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ node server.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>应用实例，访问地址为 http://0.0.0.0:8081
浏览器访问 http://127.0.0.1:8081/index.htm，如图所示：</p> <p><a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/express5.jpg"><img src="https://www.runoob.com/wp-content/uploads/2015/09/express5.jpg" alt=""></a>
现在你可以向表单输入数据，并提交，如下演示：</p> <p><a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/nodejs-gif7.gif"><img src="https://www.runoob.com/wp-content/uploads/2015/09/nodejs-gif7.gif" alt=""></a></p> <h2 id="文件上传"><a href="#文件上传" class="header-anchor">#</a> 文件上传</h2> <p>以下我们创建一个用于上传文件的表单，使用 POST 方法，表单 enctype 属性设置为 multipart/form-data。</p> <p>index.htm 文件代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;文件上传表单&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;文件上传：&lt;/h3&gt;
选择一个文件上传: &lt;br /&gt;
&lt;form action=&quot;/file_upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
&lt;input type=&quot;file&quot; name=&quot;image&quot; size=&quot;50&quot; /&gt;
&lt;br /&gt;
&lt;input type=&quot;submit&quot; value=&quot;上传文件&quot; /&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>server.js 文件代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var express = require('express');
var app = express();
var fs = require(&quot;fs&quot;);
 
var bodyParser = require('body-parser');
var multer  = require('multer');
 
app.use('/public', express.static('public'));
app.use(bodyParser.urlencoded({ extended: false }));
app.use(multer({ dest: '/tmp/'}).array('image'));
 
app.get('/index.htm', function (req, res) {
   res.sendFile( __dirname + &quot;/&quot; + &quot;index.htm&quot; );
})
 
app.post('/file_upload', function (req, res) {
 
   console.log(req.files[0]);  // 上传的文件信息
 
   var des_file = __dirname + &quot;/&quot; + req.files[0].originalname;
   fs.readFile( req.files[0].path, function (err, data) {
        fs.writeFile(des_file, data, function (err) {
         if( err ){
              console.log( err );
         }else{
               response = {
                   message:'File uploaded successfully', 
                   filename:req.files[0].originalname
              };
          }
          console.log( response );
          res.end( JSON.stringify( response ) );
       });
   });
})
 
var server = app.listen(8081, function () {
 
  var host = server.address().address
  var port = server.address().port
 
  console.log(&quot;应用实例，访问地址为 http://%s:%s&quot;, host, port)
 
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>执行以上代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ node server.js 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>应用实例，访问地址为 http://0.0.0.0:8081
浏览器访问 http://127.0.0.1:8081/index.htm，如图所示：</p> <p><a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/express6.jpg"><img src="https://www.runoob.com/wp-content/uploads/2015/09/express6.jpg" alt=""></a>
现在你可以向表单输入数据，并提交，如下演示：
<a data-fancybox="" title="" href="https://www.runoob.com/wp-content/uploads/2015/09/nodejs-gif8.gif"><img src="https://www.runoob.com/wp-content/uploads/2015/09/nodejs-gif8.gif" alt=""></a></p> <h2 id="cookie-管理"><a href="#cookie-管理" class="header-anchor">#</a> Cookie 管理</h2> <p>我们可以使用中间件向 Node.js 服务器发送 cookie 信息，以下代码输出了客户端发送的 cookie 信息：</p> <p>express_cookie.js 文件代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// express_cookie.js 文件
var express      = require('express')
var cookieParser = require('cookie-parser')
var util = require('util');
 
var app = express()
app.use(cookieParser())
 
app.get('/', function(req, res) {
    console.log(&quot;Cookies: &quot; + util.inspect(req.cookies));
})
 
app.listen(8081)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>执行以上代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ node express_cookie.js 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="express脚手架"><a href="#express脚手架" class="header-anchor">#</a> express脚手架</h2> <p>Express 应用程序生成器
通过应用生成器工具 express-generator 可以快速创建一个应用的骨架。</p> <p>express-generator 包含了 express 命令行工具。通过如下命令即可安装：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm install express-generator -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>-h 参数可以列出所有可用的命令行参数：

$ express -h

  Usage: express [options] [dir]

  Options:

    -h, --help          输出使用方法
        --version       输出版本号
    -e, --ejs           添加对 ejs 模板引擎的支持
        --hbs           添加对 handlebars 模板引擎的支持
        --pug           添加对 pug 模板引擎的支持
    -H, --hogan         添加对 hogan.js 模板引擎的支持
        --no-view       创建不带视图引擎的项目
    -v, --view &lt;engine&gt; 添加对视图引擎（view） &lt;engine&gt; 的支持 (ejs|hbs|hjs|jade|pug|twig|vash) （默认是 jade 模板引擎）
    -c, --css &lt;engine&gt;  添加样式表引擎 &lt;engine&gt; 的支持 (less|stylus|compass|sass) （默认是普通的 css 文件）
        --git           添加 .gitignore
    -f, --force         强制在非空目录下创建
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>例如，如下命令创建了一个名称为 myapp 的 Express 应用。此应用将在当前目录下的 myapp 目录中创建，并且设置为使用 Pug 模板引擎（view engine）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ express --view=pug myapp

   create : myapp
   create : myapp/package.json
   create : myapp/app.js
   create : myapp/public
   create : myapp/public/javascripts
   create : myapp/public/images
   create : myapp/routes
   create : myapp/routes/index.js
   create : myapp/routes/users.js
   create : myapp/public/stylesheets
   create : myapp/public/stylesheets/style.css
   create : myapp/views
   create : myapp/views/index.pug
   create : myapp/views/layout.pug
   create : myapp/views/error.pug
   create : myapp/bin
   create : myapp/bin/www
然后安装所有依赖包：

$ cd myapp
$ npm install
在 MacOS 或 Linux 中，通过如下命令启动此应用：

$ DEBUG=myapp:* npm start
在 Windows 中，通过如下命令启动此应用：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><blockquote><p>set DEBUG=myapp:* &amp; npm start
然后在浏览器中打开 http://localhost:3000/ 网址就可以看到这个应用了。</p></blockquote> <p>通过生成器创建的应用一般都有如下目录结构：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.
├── app.js
├── bin
│   └── www
├── package.json
├── public
│   ├── images
│   ├── javascripts
│   └── stylesheets
│       └── style.css
├── routes
│   ├── index.js
│   └── users.js
└── views
    ├── error.pug
    ├── index.pug
    └── layout.pug

7 directories, 9 files
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>express中间件是顺序执行，冲第一个中间件执行到最后一个中间件，发起响应。如下图
<a data-fancybox="" title="" href="http://blog.colastar.club:9527/static/images/express顺序.png"><img src="http://blog.colastar.club:9527/static/images/express%E9%A1%BA%E5%BA%8F.png" alt=""></a></p> <p>在以上express介绍中只是入门的一些知识，更多api的可以前往<a href="http://www.expressjs.com.cn/4x/api.html" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查看</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/11/2023, 4:42:59 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blogs/node/Node.js数据存储方式的选择.html" class="prev">
        Node.js 数据存储方式的选择
      </a></span> <span class="next"><a href="/blogs/node/express/middleware.html">
        express中间件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blogs/assets/js/app.2c386edb.js" defer></script><script src="/blogs/assets/js/2.5689dfa7.js" defer></script><script src="/blogs/assets/js/130.cd867116.js" defer></script>
  </body>
</html>
