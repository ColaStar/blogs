<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试 | 个人博客</title>
    <meta name="description" content="江畔何人初见月，江月何年初照人？">
    <link rel="icon" href="./public/favicon.ico">
  <link rel="manifest" href="./public/manifest.json">
  <link rel="apple-touch-icon" href="./public/images/logo.png">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="./js/tj.js"></script>
  <script src="./js/code.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/blogs/views/assets/css/0.styles.16aae78f.css" as="style"><link rel="preload" href="/blogs/views/assets/js/app.bb74de65.js" as="script"><link rel="preload" href="/blogs/views/assets/js/2.d340cefd.js" as="script"><link rel="preload" href="/blogs/views/assets/js/127.83b87e1e.js" as="script"><link rel="prefetch" href="/blogs/views/assets/js/10.f7ebbe6b.js"><link rel="prefetch" href="/blogs/views/assets/js/100.9d56f288.js"><link rel="prefetch" href="/blogs/views/assets/js/101.6e2b7208.js"><link rel="prefetch" href="/blogs/views/assets/js/102.479941b4.js"><link rel="prefetch" href="/blogs/views/assets/js/103.b42a59f9.js"><link rel="prefetch" href="/blogs/views/assets/js/104.8a1f5af3.js"><link rel="prefetch" href="/blogs/views/assets/js/105.718df1b0.js"><link rel="prefetch" href="/blogs/views/assets/js/106.375dbb24.js"><link rel="prefetch" href="/blogs/views/assets/js/107.5755542f.js"><link rel="prefetch" href="/blogs/views/assets/js/108.0d10397a.js"><link rel="prefetch" href="/blogs/views/assets/js/109.fd388d4a.js"><link rel="prefetch" href="/blogs/views/assets/js/11.5394dbb4.js"><link rel="prefetch" href="/blogs/views/assets/js/110.d8885ccb.js"><link rel="prefetch" href="/blogs/views/assets/js/111.f86f0a39.js"><link rel="prefetch" href="/blogs/views/assets/js/112.e2a03527.js"><link rel="prefetch" href="/blogs/views/assets/js/113.344bc96f.js"><link rel="prefetch" href="/blogs/views/assets/js/114.6c293d46.js"><link rel="prefetch" href="/blogs/views/assets/js/115.51c650ba.js"><link rel="prefetch" href="/blogs/views/assets/js/116.eb258c3e.js"><link rel="prefetch" href="/blogs/views/assets/js/117.8af560a7.js"><link rel="prefetch" href="/blogs/views/assets/js/118.5a4052d9.js"><link rel="prefetch" href="/blogs/views/assets/js/119.c30f6889.js"><link rel="prefetch" href="/blogs/views/assets/js/12.288a296e.js"><link rel="prefetch" href="/blogs/views/assets/js/120.99e22eaf.js"><link rel="prefetch" href="/blogs/views/assets/js/121.4427142e.js"><link rel="prefetch" href="/blogs/views/assets/js/122.5398639d.js"><link rel="prefetch" href="/blogs/views/assets/js/123.4120604c.js"><link rel="prefetch" href="/blogs/views/assets/js/124.54f4ce67.js"><link rel="prefetch" href="/blogs/views/assets/js/125.578d955c.js"><link rel="prefetch" href="/blogs/views/assets/js/126.d12603c7.js"><link rel="prefetch" href="/blogs/views/assets/js/128.e2acb2be.js"><link rel="prefetch" href="/blogs/views/assets/js/129.24349544.js"><link rel="prefetch" href="/blogs/views/assets/js/13.1f8712e9.js"><link rel="prefetch" href="/blogs/views/assets/js/130.8f2fe35d.js"><link rel="prefetch" href="/blogs/views/assets/js/131.5dd4a491.js"><link rel="prefetch" href="/blogs/views/assets/js/132.409a5a71.js"><link rel="prefetch" href="/blogs/views/assets/js/14.6209f1f1.js"><link rel="prefetch" href="/blogs/views/assets/js/15.896148f1.js"><link rel="prefetch" href="/blogs/views/assets/js/16.8cba17f0.js"><link rel="prefetch" href="/blogs/views/assets/js/17.afed35eb.js"><link rel="prefetch" href="/blogs/views/assets/js/18.07622e57.js"><link rel="prefetch" href="/blogs/views/assets/js/19.bd3d7d16.js"><link rel="prefetch" href="/blogs/views/assets/js/20.7d79d8c1.js"><link rel="prefetch" href="/blogs/views/assets/js/21.10df7ed9.js"><link rel="prefetch" href="/blogs/views/assets/js/22.9c329665.js"><link rel="prefetch" href="/blogs/views/assets/js/23.29e804ad.js"><link rel="prefetch" href="/blogs/views/assets/js/24.0c93a9d3.js"><link rel="prefetch" href="/blogs/views/assets/js/25.6bc852b0.js"><link rel="prefetch" href="/blogs/views/assets/js/26.4ad1dd83.js"><link rel="prefetch" href="/blogs/views/assets/js/27.03a9f695.js"><link rel="prefetch" href="/blogs/views/assets/js/28.d4b5483a.js"><link rel="prefetch" href="/blogs/views/assets/js/29.0d7722eb.js"><link rel="prefetch" href="/blogs/views/assets/js/3.9c816438.js"><link rel="prefetch" href="/blogs/views/assets/js/30.42d44b0b.js"><link rel="prefetch" href="/blogs/views/assets/js/31.5ec808e9.js"><link rel="prefetch" href="/blogs/views/assets/js/32.9b1ae77e.js"><link rel="prefetch" href="/blogs/views/assets/js/33.4600eb3f.js"><link rel="prefetch" href="/blogs/views/assets/js/34.b4c2247c.js"><link rel="prefetch" href="/blogs/views/assets/js/35.ff28cf8d.js"><link rel="prefetch" href="/blogs/views/assets/js/36.c1a8c98c.js"><link rel="prefetch" href="/blogs/views/assets/js/37.6a31e013.js"><link rel="prefetch" href="/blogs/views/assets/js/38.48c15928.js"><link rel="prefetch" href="/blogs/views/assets/js/39.7dde3e32.js"><link rel="prefetch" href="/blogs/views/assets/js/4.24ea45a9.js"><link rel="prefetch" href="/blogs/views/assets/js/40.ef2c199e.js"><link rel="prefetch" href="/blogs/views/assets/js/41.28b093df.js"><link rel="prefetch" href="/blogs/views/assets/js/42.077c8147.js"><link rel="prefetch" href="/blogs/views/assets/js/43.4cac2ccf.js"><link rel="prefetch" href="/blogs/views/assets/js/44.10ac7264.js"><link rel="prefetch" href="/blogs/views/assets/js/45.723be0a2.js"><link rel="prefetch" href="/blogs/views/assets/js/46.a648c51d.js"><link rel="prefetch" href="/blogs/views/assets/js/47.b4011749.js"><link rel="prefetch" href="/blogs/views/assets/js/48.220f8ef8.js"><link rel="prefetch" href="/blogs/views/assets/js/49.d5a6acfd.js"><link rel="prefetch" href="/blogs/views/assets/js/5.588c5e99.js"><link rel="prefetch" href="/blogs/views/assets/js/50.03308e23.js"><link rel="prefetch" href="/blogs/views/assets/js/51.a42d52b4.js"><link rel="prefetch" href="/blogs/views/assets/js/52.d5669978.js"><link rel="prefetch" href="/blogs/views/assets/js/53.daaf52d4.js"><link rel="prefetch" href="/blogs/views/assets/js/54.8a3208de.js"><link rel="prefetch" href="/blogs/views/assets/js/55.2e6fe3be.js"><link rel="prefetch" href="/blogs/views/assets/js/56.59c7722b.js"><link rel="prefetch" href="/blogs/views/assets/js/57.690d6c58.js"><link rel="prefetch" href="/blogs/views/assets/js/58.c4972b5e.js"><link rel="prefetch" href="/blogs/views/assets/js/59.02a461b1.js"><link rel="prefetch" href="/blogs/views/assets/js/6.9b4144c4.js"><link rel="prefetch" href="/blogs/views/assets/js/60.408d93e5.js"><link rel="prefetch" href="/blogs/views/assets/js/61.7080d8e0.js"><link rel="prefetch" href="/blogs/views/assets/js/62.70507d81.js"><link rel="prefetch" href="/blogs/views/assets/js/63.ded98ea7.js"><link rel="prefetch" href="/blogs/views/assets/js/64.35e0b2ab.js"><link rel="prefetch" href="/blogs/views/assets/js/65.4d3d8d4c.js"><link rel="prefetch" href="/blogs/views/assets/js/66.b45e2ad6.js"><link rel="prefetch" href="/blogs/views/assets/js/67.6e5c2ab0.js"><link rel="prefetch" href="/blogs/views/assets/js/68.3f6a17b6.js"><link rel="prefetch" href="/blogs/views/assets/js/69.5978d6b7.js"><link rel="prefetch" href="/blogs/views/assets/js/7.22fd16b7.js"><link rel="prefetch" href="/blogs/views/assets/js/70.13e8e739.js"><link rel="prefetch" href="/blogs/views/assets/js/71.e3116997.js"><link rel="prefetch" href="/blogs/views/assets/js/72.361a20c9.js"><link rel="prefetch" href="/blogs/views/assets/js/73.e2865225.js"><link rel="prefetch" href="/blogs/views/assets/js/74.03773869.js"><link rel="prefetch" href="/blogs/views/assets/js/75.6aca1ef9.js"><link rel="prefetch" href="/blogs/views/assets/js/76.cb9aa75f.js"><link rel="prefetch" href="/blogs/views/assets/js/77.eeb61024.js"><link rel="prefetch" href="/blogs/views/assets/js/78.3a377b76.js"><link rel="prefetch" href="/blogs/views/assets/js/79.37771874.js"><link rel="prefetch" href="/blogs/views/assets/js/8.433f8ec9.js"><link rel="prefetch" href="/blogs/views/assets/js/80.34f3d8a1.js"><link rel="prefetch" href="/blogs/views/assets/js/81.42cc9bde.js"><link rel="prefetch" href="/blogs/views/assets/js/82.4c6501bd.js"><link rel="prefetch" href="/blogs/views/assets/js/83.a6a53f06.js"><link rel="prefetch" href="/blogs/views/assets/js/84.8ff11794.js"><link rel="prefetch" href="/blogs/views/assets/js/85.b57124a0.js"><link rel="prefetch" href="/blogs/views/assets/js/86.a153f1a7.js"><link rel="prefetch" href="/blogs/views/assets/js/87.854a3d66.js"><link rel="prefetch" href="/blogs/views/assets/js/88.938a402e.js"><link rel="prefetch" href="/blogs/views/assets/js/89.b169c8af.js"><link rel="prefetch" href="/blogs/views/assets/js/9.06a328b2.js"><link rel="prefetch" href="/blogs/views/assets/js/90.63b9ad62.js"><link rel="prefetch" href="/blogs/views/assets/js/91.cd8c037d.js"><link rel="prefetch" href="/blogs/views/assets/js/92.397f50d2.js"><link rel="prefetch" href="/blogs/views/assets/js/93.dccd1907.js"><link rel="prefetch" href="/blogs/views/assets/js/94.91203ce1.js"><link rel="prefetch" href="/blogs/views/assets/js/95.2361bd58.js"><link rel="prefetch" href="/blogs/views/assets/js/96.73392739.js"><link rel="prefetch" href="/blogs/views/assets/js/97.969abc32.js"><link rel="prefetch" href="/blogs/views/assets/js/98.4dc10358.js"><link rel="prefetch" href="/blogs/views/assets/js/99.0a4243d8.js">
    <link rel="stylesheet" href="/blogs/views/assets/css/0.styles.16aae78f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/views/" class="home-link router-link-active"><!----> <span class="site-name">个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blogs/views/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/views/no.0/js/es6.html" class="nav-link">前端基础</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/javascript-QA/javascriptqa.html" class="nav-link">javaScript与测试工程师</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.1/函数式编程/函数式编程.html" class="nav-link">编程相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.2/http.html" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.3/webpack.html" class="nav-link">前端自动化</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.4/前端性能优化.html" class="nav-link">前端优化</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.5/css工作流.html" class="nav-link">css相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.6/react/react.html" class="nav-link">框架相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.7/计算机组成原理.html" class="nav-link">跨界</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.8/数据结构与算法.html" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/node/node/node.html" class="nav-link">node相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/other/git/git命令全集.html" class="nav-link">其他相关</a></li></ul></div></div><div class="nav-item"><a href="/blogs/views/no.1/" class="nav-link">面试</a></div><div class="nav-item"><a href="https://github.com/ColaStar/blogs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blogs/views/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/views/no.0/js/es6.html" class="nav-link">前端基础</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/javascript-QA/javascriptqa.html" class="nav-link">javaScript与测试工程师</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.1/函数式编程/函数式编程.html" class="nav-link">编程相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.2/http.html" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.3/webpack.html" class="nav-link">前端自动化</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.4/前端性能优化.html" class="nav-link">前端优化</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.5/css工作流.html" class="nav-link">css相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.6/react/react.html" class="nav-link">框架相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.7/计算机组成原理.html" class="nav-link">跨界</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/no.8/数据结构与算法.html" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/node/node/node.html" class="nav-link">node相关</a></li><li class="dropdown-item"><!----> <a href="/blogs/views/other/git/git命令全集.html" class="nav-link">其他相关</a></li></ul></div></div><div class="nav-item"><a href="/blogs/views/no.1/" class="nav-link">面试</a></div><div class="nav-item"><a href="https://github.com/ColaStar/blogs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blogs/views/other/git/git命令全集.html" class="sidebar-link">常用 Git 命令清单</a></li><li><a href="/blogs/views/other/git/git版本管理规范.html" class="sidebar-link">git版本管理规范</a></li><li><a href="/blogs/views/other/typeScript.html" class="sidebar-link">TypeScript入门</a></li><li><a href="/blogs/views/other/优雅降级与渐进增强.html" class="sidebar-link">优雅降级与渐进增强</a></li><li><a href="/blogs/views/other/前端路由.html" class="sidebar-link">前端路由</a></li><li><a href="/blogs/views/other/手写各种/promise.html" class="sidebar-link">Promise、</a></li><li><a href="/blogs/views/other/手写各种/手写代码实现.html" class="active sidebar-link">面试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写new" class="sidebar-link">手写new</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写json-stringify" class="sidebar-link">手写JSON.stringify</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写json-parse" class="sidebar-link">手写JSON.parse</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写一个call或-apply" class="sidebar-link">手写一个call或 apply</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写一个function-bind" class="sidebar-link">手写一个Function.bind</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写一个继承" class="sidebar-link">手写一个继承</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写一个js函数柯里化和反柯里化" class="sidebar-link">手写一个JS函数柯里化和反柯里化</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写一个promise" class="sidebar-link">手写一个Promise</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写防抖-debouncing-和节流-throttling" class="sidebar-link">手写防抖(Debouncing)和节流(Throttling)</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写一个js深拷贝-由浅入深多种解法" class="sidebar-link">手写一个JS深拷贝(由浅入深多种解法)</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写一个instanceof原理" class="sidebar-link">手写一个instanceOf原理</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写一个map" class="sidebar-link">手写一个map</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写reduce" class="sidebar-link">手写reduce</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写实现拖拽" class="sidebar-link">手写实现拖拽</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#使用settimeout模拟setinterval" class="sidebar-link">使用setTimeout模拟setInterval</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写实现object-create的基本原理" class="sidebar-link">手写实现Object.create的基本原理</a></li><li class="sidebar-sub-header"><a href="/blogs/views/other/手写各种/手写代码实现.html#手写实现一个基本的event-bus" class="sidebar-link">手写实现一个基本的Event Bus</a></li></ul></li><li><a href="/blogs/views/other/网站令浏览器崩溃的原因.html" class="sidebar-link">网站导致浏览器崩溃的原因</a></li><li><a href="/blogs/views/other/重构.html" class="sidebar-link">重构 - 改善既有代码的设计</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="面试"><a href="#面试" aria-hidden="true" class="header-anchor">#</a> 面试</h1> <h2 id="手写new"><a href="#手写new" aria-hidden="true" class="header-anchor">#</a> 手写new</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>function new (fun){
  if(typeof fun !== 'function'){
     throw Error(`${fun} is not a function` )
  }
  var obj = {}
  obj.__proto__ = fun.prototype;
  var result = fun.apply(obj,Array.prototype.slice(arguments,1))
  return result
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="手写json-stringify"><a href="#手写json-stringify" aria-hidden="true" class="header-anchor">#</a> 手写JSON.stringify</h2> <ul><li>Boolean | Number| String 类型会自动转换成对应的原始值。</li> <li>undefined、任意函数以及symbol，会被忽略（出现在非数组对象的属性值中时），或者被转换成 null（出现在数组中时）。</li> <li>不可枚举的属性会被忽略</li> <li>如果一个对象的属性值通过某种间接的方式指回该对象本身，即循环引用，属性也会被忽略</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>function stringify(obj){
  let type = typeof obj;
    if (type !== &quot;object&quot;) {
        if (/string|undefined|function/.test(type)) {
            obj = '&quot;' + obj + '&quot;';
        }
        return String(obj);
    } else {
        let json = []
        let arr = Array.isArray(obj)
        for (let k in obj) {
            let v = obj[k];
            let type = typeof v;
            if (/string|undefined|function/.test(type)) {
                v = '&quot;' + v + '&quot;';
            } else if (type === &quot;object&quot;) {
                v = jsonStringify(v);
            }
            json.push((arr ? &quot;&quot; : '&quot;' + k + '&quot;:') + String(v));
        }
        return (arr ? &quot;[&quot; : &quot;{&quot;) + String(json) + (arr ? &quot;]&quot; : &quot;}&quot;)
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="手写json-parse"><a href="#手写json-parse" aria-hidden="true" class="header-anchor">#</a> 手写JSON.parse</h2> <ul><li>最简单的肯定是直接eval了，但是eval() 是一个危险的函数， 他执行的代码拥有着执行者的权利。如果你用 eval()运行的字符串代码被恶意方（不怀好意的人）操控修改，您最终可能会在您的网页/扩展程序的权限下，在用户计算机上运行恶意代码。</li></ul> <p>即会有XSS 漏洞。触发条件：参数 json 并非真正的 JSON 数据，而是可执行的 JS 代码。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function jsonParse(opt) {
    return eval('(' + opt + ')');
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>所以对参数 json 做校验，只有真正符合 JSON 格式，才能调用 eval，具体就是下面这几个正则匹配。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var rx_one = /^[\],:{}\s]*$/;
var rx_two = /\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g;
var rx_three = /&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;
var rx_four = /(?:^|:|,)(?:\s*\[)+/g;

if (
    rx_one.test(
        json
            .replace(rx_two, &quot;@&quot;)
            .replace(rx_three, &quot;]&quot;)
            .replace(rx_four, &quot;&quot;)
    )
) {
    var obj = eval(&quot;(&quot; +json + &quot;)&quot;);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="手写一个call或-apply"><a href="#手写一个call或-apply" aria-hidden="true" class="header-anchor">#</a> 手写一个call或 apply</h2> <ul><li>call</li></ul> <p>a.call(obj,'1')</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Function.prototype.call = function(context){
   if(typeof this !== 'function'){
     Throw new Error('this is not a function')
   }
   context = context | window
   context.fn = this;
   var argus = [...arguments].slice(1)
   var result = context.fn(...argus)
   delete context.fn
   return result
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>apply</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>Function.prototype.apply = function(context,arr){
  if(typeof this !== 'function'){
    Throw new Error('this is not a function')
  }
  context = context | window
  context.fn = this;
  if(arr){
  var result = context.fn(arr)
  }else{
   var result = context.fn(arr)
  }
  delete context.fn;
  return result;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="手写一个function-bind"><a href="#手写一个function-bind" aria-hidden="true" class="header-anchor">#</a> 手写一个Function.bind</h2> <p>var b = a.bind(obj,1)
b(2)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Function.prototype.bind(context){
if(typeof this !== 'function'){
  Throw new Error('Function.prototype.bind - what is trying to be bound is not callable')
}
var _self = this;
var augus = Array.prototype.slice.call(arguments,1);
var trFn = function(){}
var returnFn = function(){
var bindArgus = Array.prototype.slice.call(arguments);
return _self.apply(this in trFn ? this : context,argus.concat(bindArgus))
}
trFn.prototype = this.prototype;
returnFn.prototype = new trFn()
return returnFn;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="手写一个继承"><a href="#手写一个继承" aria-hidden="true" class="header-anchor">#</a> 手写一个继承</h2> <p>寄生组合式继承</p> <p>一般只建议写这种，因为其它方式的继承会在一次实例中调用两次父类的构造函数或有其它缺点。</p> <p>核心实现是：用一个 F 空的构造函数去取代执行了 Parent 这个构造函数。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function Parent(name) {
    this.name = name;
}
Parent.prototype.sayName = function() {
    console.log('parent name:', this.name);
}
function Child(name, parentName) {
    Parent.call(this, parentName);  
    this.name = name;    
}
function create(proto) {
    function F(){}
    F.prototype = proto;
    return new F();
}
Child.prototype = create(Parent.prototype);
Child.prototype.sayName = function() {
    console.log('child name:', this.name);
}
Child.prototype.constructor = Child;

var parent = new Parent('father');
parent.sayName();    // parent name: father

var child = new Child('son', 'father');

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="手写一个js函数柯里化和反柯里化"><a href="#手写一个js函数柯里化和反柯里化" aria-hidden="true" class="header-anchor">#</a> 手写一个JS函数柯里化和反柯里化</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>function curry(fn,args){
    var length = fn.length;
    var args = args || [];
    return function(){
        newArgs = args.concat(Array.prototype.slice.call(arguments));
        if (newArgs.length &lt; length) {
            return curry.call(this,fn,newArgs);
        }else{
            return fn.apply(this,newArgs);
        }
    }
}

function multiFn(a, b, c) {
    return a * b * c;
}

var multi = curry(multiFn);

multi(2)(3)(4);
multi(2,3,4);
multi(2)(3,4);
multi(2,3)(4);

//ES6


const curry = (fn, arr = []) =&gt; (...args) =&gt; (
  arg =&gt; arg.length === fn.length
    ? fn(...arg)
    : curry(fn, arg)
)([...arr, ...args])

let curryTest=curry((a,b,c,d)=&gt;a+b+c+d)
curryTest(1,2,3)(4) //返回10
curryTest(1,2)(4)(3) //返回10
curryTest(1,2)(3,4) //返回10

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="手写一个promise"><a href="#手写一个promise" aria-hidden="true" class="header-anchor">#</a> 手写一个Promise</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>function Promise(executor) {
    let that = this;
    that.status = 'pending';
    that.value = null;
    that.reason = null;
    that.onFilFulledCallbacks = [];
    that.onRejectedCallbacks = [];

    function resolve(value) {
        if (that.status === 'pending') {
            that.status = 'resolved';
            that.value = value;
            that.onFilFulledCallbacks.forEach((fn) = &amp; gt; {
                fn();
            });
        }
    }

    function reject(reason) {
        if (that.status === 'pending') {
            that.status = 'rejected';
            that.reason = reason;
            that.onRejectedCallbacks.forEach((fn) = &amp; gt; {
                fn();
            });
        }
    }
    executor(resolve, reject);
}

Promise.prototype.then = function (onFilfulled, onRejected) {
    let that = this;
    /** 1 让promise2等于一个新的Promise 并将promise2返回 */
    let promise2 = new Promise((resolve, reject) = &amp; gt; {
        if (that.status === 'resolved') {
            /** 2 因为返回了promise2 
             *  并且第3步resolvePromiseRelation函数中传递了promise2
             *  而目前promise2并没有拿到
             *  所以加一个定时器 异步执行 等到promise2拿到后 
             *  再去执行 resolvePromiseRelation()方法 并将promise2传递进去*/
            setTimeout(() = &amp; gt; {
                try {
                    let promise3 = onFilfulled(that.value);
                    /** 3 判断新返回值是什么类型的函数
                     *  并将当前的promise：promise2  新的返回值：promise3 
                     *  和 成功时回调：esolve  失败时回调：reject 作为参数传进去 */
                    resolvePromiseRelation(promise2, promise3, resolve, reject);
                } catch (e) {
                    reject(e);
                }
            }, 0);
        }
        if (that.status === 'rejected') {
            /** 同2 */
            setTimeout(() = &amp; gt; {
                try {
                    let promise3 = onRejected(that.reason);
                    /** 同3*/
                    resolvePromiseRelation(promise2, promise3, resolve, reject);
                } catch (e) {
                    reject(e);
                }
            }, 0);
        }
        if (that.status === 'pending') {
            that.onFilFulledCallbacks.push(function () {
                /** 同2 */
                setTimeout(() = &amp; gt; {
                    try {
                        let promise3 = onFilfulled(that.value);
                        /** 同3*/
                        resolvePromiseRelation(promise2, promise3, resolve, reject);
                    } catch (e) {
                        reject(e);
                    }
                }, 0);
            });
        }
        if (that.status === 'pending') {
            that.onRejectedCallbacks.push(function () {
                /** 同2 */
                setTimeout(() = &amp; gt; {
                    try {
                        let promise3 = onRejected(that.reason);
                        /** 同3*/
                        resolvePromiseRelation(promise2, promise3, resolve, reject);
                    } catch (e) {
                        reject(e);
                    }
                }, 0);
            });
        }
    });
    /** 同1 */
    return promise2;
}

function resolvePromiseRelation(promise2, promise3, resolve, reject) {
    /** 4 防止自己等待自己 一直循环等待 */
    if (promise2 === promise3) {
        return reject(new TypeError('循环引用了!'));
    }
    /**  8 一个标示 表示当前没有被调用过 
     *   确保resolve或者reject后的状态不会再次发生变更
     */
    let called;
    /** 5 保证promise3是一个引用类型
     *  判断新返回值promise3的类型 
     *  如果是普通值常量 就直接resolve导出 */
    if (promise3 !== null &amp; amp; &amp; amp;
        (typeof promise3 === 'object' || typeof promise3 === 'function')) {
        try {
            let then = promise3.then;
            /** 6 确保promise3是一个Promise
             *  判断promise3的then方法
             *  如果存在 并且是一个function类型 
             *  就表示promise3是一个Promise */
            if (typeof then === 'function') {
                /** 9 执行promise3的then方法
                 *  因为promise3也是一个Promise
                 *  需要再次解析promise3的then方法
                 *  直到解析到最后的返回值不是一个Promise类型为止
                 */
                then(promise3, (promise4) = &amp; gt; {
                    /** 同8 */
                    if (called) return;
                    called = true;
                    /** 10 递归解析新的返回值的类型
                     *  解析到返回值不是一个Promise类型为止
                     */
                    resolvePromiseRelation(promise3, promise4, resolve, reject);
                }, (r) = &amp; gt; {
                    /** 同8 */
                    if (called) return;
                    called = true;
                    reject(r);
                });
            } else {
                /** 7 此时promise3是一个普通对象 直接resolve() */
                resolve(promise3);
            }
        } catch (e) {
            /** 同8 */
            if (called) return;
            called = true;
            reject(e);
        };
    } else {
        //常量
        /** 同5 普通值直接resolve()*/
        resolve(promise3);
    }
}

module.exports = Promise;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br></div></div><h2 id="手写防抖-debouncing-和节流-throttling"><a href="#手写防抖-debouncing-和节流-throttling" aria-hidden="true" class="header-anchor">#</a> 手写防抖(Debouncing)和节流(Throttling)</h2> <p>某些代码不可以在没有间断的情况连续重复执行</p> <p>1、DOM操作比起非DOM交互，需要更多地内存和CPU时间，连续尝试过多的DOM操作有可能会导致浏览器挂起，甚至奔溃。 2、防止恶意脚本攻击</p> <p>由于节流在resize中是最常用的，如果基于该事件来改变页面布局的话，最好控制处理频率，以确保浏览器不会在极短的时间内进行过多次的计算。</p> <p>节流</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> let oBtn=document.getElementById('show');
  let oBox=document.getElementById('box');

  /*
      节流函数
      handle:buy函数
      wait:规定在一秒钟内只能执行一次
  */
function tab(add, wite){
  let lastTime = 0;
  return function(e) {
    let nowTime = new Date().getTime()
    if(nowTime - lastTime &gt; wite){
      add()
      lastTime = nowTime
    }
  }
}
function add (){
  oBox.innerText = parseInt(oBox.innerText) +1
}
oBtn.onclick = tab(add ,1000)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>防抖</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let oIpt = document.getElementById('ipt');

    let time = null;

    function debounce (handle, delay) {

        let time = null;

        return function () {

            let self = this,arg = arguments;

            clearTimeout(time);

            time = setTimeout(function () {

                handle.apply(self,arg);　　//this绑定

            },delay)

        }

    }

    function ajax (e) {

        console.log(e,this.value)

    }

    oIpt.oninput = debounce(ajax, 1000)  //1s后发出请求
   &lt;!--去掉上一个timer，重新加一个--&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="手写一个js深拷贝-由浅入深多种解法"><a href="#手写一个js深拷贝-由浅入深多种解法" aria-hidden="true" class="header-anchor">#</a> 手写一个JS深拷贝(由浅入深多种解法)</h2> <blockquote><p>乞丐版</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code> var newObj = JSON.parse( JSON.stringify( someObj ) );
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>递归</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>function deepCopy(obj){
    //判断是否是简单数据类型，
    if(typeof obj == &quot;object&quot;){
        //复杂数据类型
        var result = obj.constructor == Array ? [] : {};
        for(let i in obj){
            result[i] = typeof obj[i] == &quot;object&quot; ? deepCopy(obj[i]) : obj[i];
        }
    }else {
        //简单数据类型 直接 == 赋值
        var result = obj;
    }
    return result;
}


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="手写一个instanceof原理"><a href="#手写一个instanceof原理" aria-hidden="true" class="header-anchor">#</a> 手写一个instanceOf原理</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>function instanceOf(left,right) {

    let proto = left.__proto__;
    let prototype = right.prototype
    while(true) {
        if(proto === null) return false
        if(proto === prototype) return true
        proto = proto.__proto__;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="手写一个map"><a href="#手写一个map" aria-hidden="true" class="header-anchor">#</a> 手写一个map</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>if (!Array.prototype.map) {
  Array.prototype.map = function(callback, thisArg) {

    var T, A, k;

    if (this == null) {
      throw new TypeError(&quot; this is null or not defined&quot;);
    }

    // 1. 将O赋值为调用map方法的数组.
    var O = Object(this);

    // 2.将len赋值为数组O的长度.
    var len = O.length &gt;&gt;&gt; 0;

    // 3.如果callback不是函数,则抛出TypeError异常.
    if (Object.prototype.toString.call(callback) != &quot;[object Function]&quot;) {
      throw new TypeError(callback + &quot; is not a function&quot;);
    }

    // 4. 如果参数thisArg有值,则将T赋值为thisArg;否则T为undefined.
    if (thisArg) {
      T = thisArg;
    }

    // 5. 创建新数组A,长度为原数组O长度len
    A = new Array(len);

    // 6. 将k赋值为0
    k = 0;

    // 7. 当 k &lt; len 时,执行循环.
    while(k &lt; len) {

      var kValue, mappedValue;

      //遍历O,k为原数组索引
      if (k in O) {

        //kValue为索引k对应的值.
        kValue = O[ k ];

        // 执行callback,this指向T,参数有三个.分别是kValue:值,k:索引,O:原数组.
        mappedValue = callback.call(T, kValue, k, O);

        // 返回值添加到新数组A中.
        A[ k ] = mappedValue;
      }
      // k自增1
      k++;
    }

    // 8. 返回新数组A
    return A;
  };      
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="手写reduce"><a href="#手写reduce" aria-hidden="true" class="header-anchor">#</a> 手写reduce</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>if (!Array.prototype.reduce) {
  Object.defineProperty(Array.prototype, 'reduce', {
    value: function(callback /*, initialValue*/) {
      if (this === null) {
        throw new TypeError( 'Array.prototype.reduce ' + 
          'called on null or undefined' );
      }
      if (typeof callback !== 'function') {
        throw new TypeError( callback +
          ' is not a function');
      }

      // 1. Let O be ? ToObject(this value).
      var o = Object(this);

      // 2. Let len be ? ToLength(? Get(O, &quot;length&quot;)).
      var len = o.length &gt;&gt;&gt; 0; 

      // Steps 3, 4, 5, 6, 7      
      var k = 0; 
      var value;

      if (arguments.length &gt;= 2) {
        value = arguments[1];
      } else {
        while (k &lt; len &amp;&amp; !(k in o)) {
          k++; 
        }

        // 3. If len is 0 and initialValue is not present,
        //    throw a TypeError exception.
        if (k &gt;= len) {
          throw new TypeError( 'Reduce of empty array ' +
            'with no initial value' );
        }
        value = o[k++];
      }

      // 8. Repeat, while k &lt; len
      while (k &lt; len) {
        // a. Let Pk be ! ToString(k).
        // b. Let kPresent be ? HasProperty(O, Pk).
        // c. If kPresent is true, then
        //    i.  Let kValue be ? Get(O, Pk).
        //    ii. Let accumulator be ? Call(
        //          callbackfn, undefined,
        //          « accumulator, kValue, k, O »).
        if (k in o) {
          value = callback(value, o[k], k, o);
        }

        // d. Increase k by 1.      
        k++;
      }

      // 9. Return accumulator.
      return value;
    }
  });
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h2 id="手写实现拖拽"><a href="#手写实现拖拽" aria-hidden="true" class="header-anchor">#</a> 手写实现拖拽</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;meta charset=&quot;UTF-8&quot;&gt;
 &lt;meta name=&quot;Generator&quot; content=&quot;EditPlus®&quot;&gt;
 &lt;meta name=&quot;Author&quot; content=&quot;&quot;&gt;
 &lt;meta name=&quot;Keywords&quot; content=&quot;&quot;&gt;
 &lt;meta name=&quot;Description&quot; content=&quot;&quot;&gt;
 &lt;title&gt;Document&lt;/title&gt;
 &lt;style type=&quot;text/css&quot;&gt;
 *{
 margin:0;
 padding:0;
 }
 body{
 background:url(&quot;img/2345_image_file_copy_1.jpg&quot;);
 }
 #d1{
 width:100px;
 height:100px;
 background:red;
 margin-left:300px;
 }
 &lt;/style&gt;
 &lt;/head&gt;
 &lt;body&gt;
 &lt;div id=&quot;d1&quot;&gt;&lt;/div&gt;
 &lt;/body&gt;
 &lt;script&gt;
 window.onload=function(){
    var d1=document.getElementById(&quot;d1&quot;);
    d1.onmousedown=function(e){
        var mouseX=e.clientX;
        var mouseY=e.clientY;//计算xy
        var pianyiX=mouseX-d1.offsetLeft;
        var pianyiY=mouseY-d1.offsetTop;
        document.onmousemove=function(e){
            var newX=e.clientX-pianyiX;
            var newY=e.clientY-pianyiY;
            d1.style.marginLeft=newX+&quot;px&quot;;
            d1.style.marginTop=newY+&quot;px&quot;;
        }
    };
 document.onmouseup = function(e){
   document.onmousemove = null ;
    };
 }

 &lt;/script&gt;
&lt;/html&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="使用settimeout模拟setinterval"><a href="#使用settimeout模拟setinterval" aria-hidden="true" class="header-anchor">#</a> 使用setTimeout模拟setInterval</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>setTimeout(function () {
    // 任务
    setTimeout(arguments.callee, interval);
}, interval)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="手写实现object-create的基本原理"><a href="#手写实现object-create的基本原理" aria-hidden="true" class="header-anchor">#</a> 手写实现Object.create的基本原理</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>Object.create= function (obj, properties) {
    function F () {}
    F.prototype = obj;
    let o = new F();
    // 注意Object.create可以传入第二个参数，是一个对象，但格式必须是Object.defineProperties()方法一样
    if (typeof properties === 'object') {
        Object.defineProperties(o, properties);
    }
    return o;
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="手写实现一个基本的event-bus"><a href="#手写实现一个基本的event-bus" aria-hidden="true" class="header-anchor">#</a> 手写实现一个基本的Event Bus</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>(function (exporter) {
    function isFunc(fn) { return typeof fn === &quot;function&quot; }
    function str(s) {
        if (s == null) {
            return null;
        }
        s = s.replace(/^\s+|\s+$/g, &quot;&quot;);
        return s.length &gt; 0 ? s.toLowerCase() : null;
    }

    function handler() {
        var fns = [];
        var datas = [];
        this.add = function (fn, data) {
            fns.push(fn);
            datas.push(data);
        }
        this.remove = function (fn) {
            var i = fns.indexOf(fn);
            if (i &gt;= 0) {
                fns.splice(i, 1);
                datas.splice(i, 1);
            }
        }
        this.invoke = function (sender, data) {
            fns.forEach((fn, i) =&gt; {
                try {
                    fn(sender, data, datas[i])
                } catch (error) {
                    console.error(error);
                }
            });
        }
    }

    function eventBus() {
        var handers = {}
        this.on = function (eventName, fnOrData, fn) {
            eventName = str(eventName);
            if (eventName == null) {
                throw new Error(&quot;事件名无效&quot;);
            }
            if (!isFunc(fn)) {
                var temp = fn;
                fn = fnOrData;
                fnOrData = temp;
            }
            if (!isFunc(fn)) {
                throw new Error(&quot;必须提供事件函数&quot;);
            }
            var handle = handers[eventName];
            if (handle == null) {
                handle = new handler();
                handers[eventName] = handle;
            }
            handle.add(fn, fnOrData);
        }
        this.off = function (eventName, fn) {
            eventName = str(eventName);
            if (eventName == null) {
                return;
            }
            var handle = handers[eventName];
            if (handle != null) {
                if (fn == null) {
                    delete handers[eventName];
                } else {
                    handle.remove(fn);
                }
            }
        }
        this.fire = this.emit = this.trigger =
            function (eventName, sender, data) {
                eventName = str(eventName);
                if (eventName == null) {
                    return;
                }
                var handle = handers[eventName];
                if (handle != null) {
                    handle.invoke(sender, data);
                }
            }
        var bus = this;
        this.bindTo = function(obj){
            if(obj == null){
                throw new Error(&quot;obj is null&quot;);
            }
            for (const key in bus) {
                if (bus.hasOwnProperty(key) &amp;&amp; key !== &quot;bindTo&quot;) {
                    obj[key] = bus[key];
                }
            }
        }
    }
    var instance = new eventBus();
    instance.bindTo(eventBus);
    exporter(eventBus);
})(c =&gt; window.eventBus = c)


//绑定
eventBus.on(&quot;data_completed&quot;, function (sender, data, obj) {
    console.log({ sender, data, sign: obj.sign });
}, { sign: &quot;F6243749AFF04C0581E1DD178A0B737A&quot; });

//触发
eventBus.emit(eventName[, sender][, data]);
eventBus.trigger(eventName[, sender][, data]);
eventBus.fire(eventName[, sender][, data]);
eventBus.emit(&quot;Data_Completed&quot;, window, [1,2,3,4,5,6]);

//多次绑定
var f2 = function (sender, data, obj) {
    console.log({ sender, data, sign: obj.sign });
}
eventBus.on(&quot;data_completed&quot;, f2 , { sign: &quot;722F9C19C9704412B93216BD70F2AE52&quot; });
eventBus.emit(&quot;Data_Completed&quot;, window, [1,2,3,4,5,6]);

//解绑、清空
eventBus.off(&quot;Data_Completed&quot;, f2);
eventBus.emit(&quot;Data_Completed&quot;, window, [1,2,3,4,5,6]);
eventBus.off(&quot;Data_Completed&quot;);
eventBus.emit(&quot;Data_Completed&quot;, window, [1,2,3,4,5,6]);

//初始化一个新的
var myEventBus = new eventBus();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/11/2019, 1:12:41 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blogs/views/other/手写各种/promise.html" class="prev">
          Promise、
        </a></span> <span class="next"><a href="/blogs/views/other/网站令浏览器崩溃的原因.html">
          网站导致浏览器崩溃的原因
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blogs/views/assets/js/app.bb74de65.js" defer></script><script src="/blogs/views/assets/js/2.d340cefd.js" defer></script><script src="/blogs/views/assets/js/127.83b87e1e.js" defer></script>
  </body>
</html>
